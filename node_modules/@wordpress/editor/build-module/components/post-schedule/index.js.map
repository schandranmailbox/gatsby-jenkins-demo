{"version":3,"sources":["@wordpress/editor/src/components/post-schedule/index.js"],"names":["__experimentalGetSettings","withSelect","withDispatch","compose","DateTimePicker","useRef","PostSchedule","date","onUpdateDate","ref","settings","is12HourTime","test","formats","time","toLowerCase","replace","split","reverse","join","onChange","newDate","ownerDocument","current","activeElement","blur","select","getEditedPostAttribute","dispatch","editPost"],"mappings":";;AAAA;AACA;AACA;AACA,SAASA,yBAAT,QAA0C,iBAA1C;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,iBAAzC;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,SAASC,MAAT,QAAuB,oBAAvB;AAEA,OAAO,SAASC,YAAT,OAAgD;AAAA,MAAvBC,IAAuB,QAAvBA,IAAuB;AAAA,MAAjBC,YAAiB,QAAjBA,YAAiB;AACtD,MAAMC,GAAG,GAAGJ,MAAM,EAAlB;;AACA,MAAMK,QAAQ,GAAGV,yBAAyB,EAA1C,CAFsD,CAGtD;AACA;;;AACA,MAAMW,YAAY,GAAG,WAAWC,IAAX,CACpBF,QAAQ,CAACG,OAAT,CAAiBC,IAAjB,CACEC,WADF,GACgB;AADhB,GAEEC,OAFF,CAEW,OAFX,EAEoB,EAFpB,EAEyB;AAFzB,GAGEC,KAHF,CAGS,EAHT,EAIEC,OAJF,GAKEC,IALF,CAKQ,EALR,CADoB,CAMP;AANO,GAArB;;AASA,WAASC,QAAT,CAAmBC,OAAnB,EAA6B;AAC5Bb,IAAAA,YAAY,CAAEa,OAAF,CAAZ;AAD4B,QAEpBC,aAFoB,GAEFb,GAAG,CAACc,OAFF,CAEpBD,aAFoB;AAG5BA,IAAAA,aAAa,CAACE,aAAd,CAA4BC,IAA5B;AACA;;AAED,SACC,cAAC,cAAD;AACC,IAAA,GAAG,EAAGhB,GADP;AAEC,IAAA,WAAW,EAAGF,IAFf;AAGC,IAAA,QAAQ,EAAGa,QAHZ;AAIC,IAAA,QAAQ,EAAGT;AAJZ,IADD;AAQA;AAED,eAAeR,OAAO,CAAE,CACvBF,UAAU,CAAE,UAAEyB,MAAF,EAAc;AACzB,SAAO;AACNnB,IAAAA,IAAI,EAAEmB,MAAM,CAAE,aAAF,CAAN,CAAwBC,sBAAxB,CAAgD,MAAhD;AADA,GAAP;AAGA,CAJS,CADa,EAMvBzB,YAAY,CAAE,UAAE0B,QAAF,EAAgB;AAC7B,SAAO;AACNpB,IAAAA,YADM,wBACQD,IADR,EACe;AACpBqB,MAAAA,QAAQ,CAAE,aAAF,CAAR,CAA0BC,QAA1B,CAAoC;AAAEtB,QAAAA,IAAI,EAAJA;AAAF,OAApC;AACA;AAHK,GAAP;AAKA,CANW,CANW,CAAF,CAAP,CAaVD,YAbU,CAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __experimentalGetSettings } from '@wordpress/date';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { DateTimePicker } from '@wordpress/components';\nimport { useRef } from '@wordpress/element';\n\nexport function PostSchedule( { date, onUpdateDate } ) {\n\tconst ref = useRef();\n\tconst settings = __experimentalGetSettings();\n\t// To know if the current timezone is a 12 hour time with look for \"a\" in the time format\n\t// We also make sure this a is not escaped by a \"/\"\n\tconst is12HourTime = /a(?!\\\\)/i.test(\n\t\tsettings.formats.time\n\t\t\t.toLowerCase() // Test only the lower case a\n\t\t\t.replace( /\\\\\\\\/g, '' ) // Replace \"//\" with empty strings\n\t\t\t.split( '' )\n\t\t\t.reverse()\n\t\t\t.join( '' ) // Reverse the string and test for \"a\" not followed by a slash\n\t);\n\n\tfunction onChange( newDate ) {\n\t\tonUpdateDate( newDate );\n\t\tconst { ownerDocument } = ref.current;\n\t\townerDocument.activeElement.blur();\n\t}\n\n\treturn (\n\t\t<DateTimePicker\n\t\t\tref={ ref }\n\t\t\tcurrentDate={ date }\n\t\t\tonChange={ onChange }\n\t\t\tis12Hour={ is12HourTime }\n\t\t/>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tdate: select( 'core/editor' ).getEditedPostAttribute( 'date' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\treturn {\n\t\t\tonUpdateDate( date ) {\n\t\t\t\tdispatch( 'core/editor' ).editPost( { date } );\n\t\t\t},\n\t\t};\n\t} ),\n] )( PostSchedule );\n"]}