{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/menu.native.js"],"names":["FlatList","View","TouchableHighlight","TouchableWithoutFeedback","Dimensions","pick","Component","createBlock","rawHandler","store","blocksStore","withDispatch","withSelect","withInstanceId","compose","BottomSheet","BottomSheetConsumer","InserterButton","getClipboard","styles","MIN_COL_NUM","InserterMenu","arguments","onClose","bind","onLayout","renderItem","state","numberOfColumns","addEventListener","props","showInsertionPoint","hideInsertionPoint","removeEventListener","bottomSheetWidth","columnPadding","paddingLeft","paddingRight","Styles","modalItem","itemPaddingLeft","itemPaddingRight","itemWidth","modalIconWrapper","width","getWidth","itemTotalWidth","calculateItemWidth","containerTotalWidth","numofColumns","Math","floor","numOfColumns","calculateMinItemWidth","maxWidth","shouldReplaceBlock","insertDefaultBlock","onDismiss","calculateColumnsProperties","setState","initialItems","items","canInsertBlockType","destinationRootClientId","getBlockType","filter","name","clipboard","clipboardBlock","HTML","shouldAddClipboardBlock","id","initialAttributes","attributes","innerBlocks","item","onSelect","getItems","listProps","safeAreaBottomInset","rowSeparator","contentContainerStyle","paddingBottom","list","select","clientId","isAppender","rootClientId","getInserterItems","getBlockName","getBlockRootClientId","getBlockSelectionEnd","getSettings","getChildBlockNames","end","undefined","destinationRootBlockName","shouldInsertAtTheTop","__experimentalShouldInsertAtTheTop","rootChildBlocks","dispatch","ownProps","removeBlock","resetBlocks","clearSelectedBlock","insertBlock","getBlockOrder","getBlockCount","count","blockToReplace","insertionIndex","insertedBlock"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tFlatList,\n\tView,\n\tTouchableHighlight,\n\tTouchableWithoutFeedback,\n\tDimensions,\n} from 'react-native';\nimport { pick } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport {\n\tcreateBlock,\n\trawHandler,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport {\n\tBottomSheet,\n\tBottomSheetConsumer,\n\tInserterButton,\n\tgetClipboard,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst MIN_COL_NUM = 3;\n\nexport class InserterMenu extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onClose = this.onClose.bind( this );\n\t\tthis.onLayout = this.onLayout.bind( this );\n\t\tthis.renderItem = this.renderItem.bind( this );\n\t\tthis.state = {\n\t\t\tnumberOfColumns: MIN_COL_NUM,\n\t\t};\n\n\t\tDimensions.addEventListener( 'change', this.onLayout );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.showInsertionPoint();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.hideInsertionPoint();\n\t\tDimensions.removeEventListener( 'change', this.onLayout );\n\t}\n\n\tcalculateMinItemWidth( bottomSheetWidth ) {\n\t\tconst { paddingLeft, paddingRight } = styles.columnPadding;\n\t\treturn (\n\t\t\t( bottomSheetWidth - 2 * ( paddingLeft + paddingRight ) ) /\n\t\t\tMIN_COL_NUM\n\t\t);\n\t}\n\n\tcalculateItemWidth() {\n\t\tconst {\n\t\t\tpaddingLeft: itemPaddingLeft,\n\t\t\tpaddingRight: itemPaddingRight,\n\t\t} = InserterButton.Styles.modalItem;\n\t\tconst { width: itemWidth } = InserterButton.Styles.modalIconWrapper;\n\t\treturn itemWidth + itemPaddingLeft + itemPaddingRight;\n\t}\n\n\tcalculateColumnsProperties() {\n\t\tconst bottomSheetWidth = BottomSheet.getWidth();\n\t\tconst { paddingLeft, paddingRight } = styles.columnPadding;\n\t\tconst itemTotalWidth = this.calculateItemWidth();\n\t\tconst containerTotalWidth =\n\t\t\tbottomSheetWidth - ( paddingLeft + paddingRight );\n\t\tconst numofColumns = Math.floor( containerTotalWidth / itemTotalWidth );\n\n\t\tif ( numofColumns < MIN_COL_NUM ) {\n\t\t\treturn {\n\t\t\t\tnumOfColumns: MIN_COL_NUM,\n\t\t\t\titemWidth: this.calculateMinItemWidth( bottomSheetWidth ),\n\t\t\t\tmaxWidth: containerTotalWidth / MIN_COL_NUM,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tnumOfColumns: numofColumns,\n\t\t\tmaxWidth: containerTotalWidth / numofColumns,\n\t\t};\n\t}\n\n\tonClose() {\n\t\t// if should replace but didn't insert any block\n\t\t// re-insert default block\n\t\tif ( this.props.shouldReplaceBlock ) {\n\t\t\tthis.props.insertDefaultBlock();\n\t\t}\n\t\tthis.props.onDismiss();\n\t}\n\n\tonLayout() {\n\t\tconst {\n\t\t\tnumOfColumns,\n\t\t\titemWidth,\n\t\t\tmaxWidth,\n\t\t} = this.calculateColumnsProperties();\n\t\tconst numberOfColumns = numOfColumns;\n\n\t\tthis.setState( { numberOfColumns, itemWidth, maxWidth } );\n\t}\n\n\t/**\n\t * Processes the inserter items to check\n\t * if there's any copied block in the clipboard\n\t * to add it as an extra item\n\t */\n\tgetItems() {\n\t\tconst {\n\t\t\titems: initialItems,\n\t\t\tcanInsertBlockType,\n\t\t\tdestinationRootClientId,\n\t\t\tgetBlockType,\n\t\t} = this.props;\n\n\t\t// Filter out reusable blocks (they will be added in another tab)\n\t\tconst items = initialItems.filter(\n\t\t\t( { name } ) => name !== 'core/block'\n\t\t);\n\n\t\tconst clipboard = getClipboard();\n\t\tconst clipboardBlock =\n\t\t\tclipboard && rawHandler( { HTML: clipboard } )[ 0 ];\n\t\tconst shouldAddClipboardBlock =\n\t\t\tclipboardBlock &&\n\t\t\tcanInsertBlockType( clipboardBlock.name, destinationRootClientId );\n\n\t\treturn shouldAddClipboardBlock\n\t\t\t? [\n\t\t\t\t\t{\n\t\t\t\t\t\t...pick( getBlockType( clipboardBlock.name ), [\n\t\t\t\t\t\t\t'name',\n\t\t\t\t\t\t\t'icon',\n\t\t\t\t\t\t] ),\n\t\t\t\t\t\tid: 'clipboard',\n\t\t\t\t\t\tinitialAttributes: clipboardBlock.attributes,\n\t\t\t\t\t\tinnerBlocks: clipboardBlock.innerBlocks,\n\t\t\t\t\t},\n\t\t\t\t\t...items,\n\t\t\t  ]\n\t\t\t: items;\n\t}\n\n\trenderItem( { item } ) {\n\t\tconst { itemWidth, maxWidth } = this.state;\n\t\tconst { onSelect } = this.props;\n\t\treturn (\n\t\t\t<InserterButton\n\t\t\t\titem={ item }\n\t\t\t\titemWidth={ itemWidth }\n\t\t\t\tmaxWidth={ maxWidth }\n\t\t\t\tonSelect={ onSelect }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { numberOfColumns } = this.state;\n\t\tconst items = this.getItems();\n\n\t\treturn (\n\t\t\t<BottomSheet\n\t\t\t\tisVisible={ true }\n\t\t\t\tonClose={ this.onClose }\n\t\t\t\thideHeader\n\t\t\t\thasNavigation\n\t\t\t>\n\t\t\t\t<TouchableHighlight accessible={ false }>\n\t\t\t\t\t<BottomSheetConsumer>\n\t\t\t\t\t\t{ ( { listProps, safeAreaBottomInset } ) => (\n\t\t\t\t\t\t\t<FlatList\n\t\t\t\t\t\t\t\tonLayout={ this.onLayout }\n\t\t\t\t\t\t\t\tkey={ `InserterUI-${ numberOfColumns }` } //re-render when numberOfColumns changes\n\t\t\t\t\t\t\t\tkeyboardShouldPersistTaps=\"always\"\n\t\t\t\t\t\t\t\tnumColumns={ numberOfColumns }\n\t\t\t\t\t\t\t\tdata={ items }\n\t\t\t\t\t\t\t\tItemSeparatorComponent={ () => (\n\t\t\t\t\t\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\t\t\t\t\t\taccessible={ false }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<View style={ styles.rowSeparator } />\n\t\t\t\t\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tkeyExtractor={ ( item ) => item.name }\n\t\t\t\t\t\t\t\trenderItem={ this.renderItem }\n\t\t\t\t\t\t\t\t{ ...listProps }\n\t\t\t\t\t\t\t\tcontentContainerStyle={ [\n\t\t\t\t\t\t\t\t\t...listProps.contentContainerStyle,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tpaddingBottom:\n\t\t\t\t\t\t\t\t\t\t\tsafeAreaBottomInset ||\n\t\t\t\t\t\t\t\t\t\t\tstyles.list.paddingBottom,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</BottomSheetConsumer>\n\t\t\t\t</TouchableHighlight>\n\t\t\t</BottomSheet>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select, { clientId, isAppender, rootClientId } ) => {\n\t\tconst {\n\t\t\tgetInserterItems,\n\t\t\tgetBlockName,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockSelectionEnd,\n\t\t\tgetSettings,\n\t\t\tcanInsertBlockType,\n\t\t} = select( 'core/block-editor' );\n\t\tconst { getChildBlockNames, getBlockType } = select( blocksStore );\n\n\t\tlet destinationRootClientId = rootClientId;\n\t\tif ( ! destinationRootClientId && ! clientId && ! isAppender ) {\n\t\t\tconst end = getBlockSelectionEnd();\n\t\t\tif ( end ) {\n\t\t\t\tdestinationRootClientId =\n\t\t\t\t\tgetBlockRootClientId( end ) || undefined;\n\t\t\t}\n\t\t}\n\t\tconst destinationRootBlockName = getBlockName(\n\t\t\tdestinationRootClientId\n\t\t);\n\n\t\tconst {\n\t\t\t__experimentalShouldInsertAtTheTop: shouldInsertAtTheTop,\n\t\t} = getSettings();\n\n\t\treturn {\n\t\t\trootChildBlocks: getChildBlockNames( destinationRootBlockName ),\n\t\t\titems: getInserterItems( destinationRootClientId ),\n\t\t\tdestinationRootClientId,\n\t\t\tshouldInsertAtTheTop,\n\t\t\tgetBlockType,\n\t\t\tcanInsertBlockType,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps, { select } ) => {\n\t\tconst {\n\t\t\tshowInsertionPoint,\n\t\t\thideInsertionPoint,\n\t\t\tremoveBlock,\n\t\t\tresetBlocks,\n\t\t\tclearSelectedBlock,\n\t\t\tinsertBlock,\n\t\t\tinsertDefaultBlock,\n\t\t} = dispatch( 'core/block-editor' );\n\n\t\treturn {\n\t\t\tshowInsertionPoint() {\n\t\t\t\tif ( ownProps.shouldReplaceBlock ) {\n\t\t\t\t\tconst { getBlockOrder, getBlockCount } = select(\n\t\t\t\t\t\t'core/block-editor'\n\t\t\t\t\t);\n\n\t\t\t\t\tconst count = getBlockCount();\n\t\t\t\t\t// Check if there is a rootClientId because that means it is a nested replacable block and we don't want to clear/reset all blocks.\n\t\t\t\t\tif ( count === 1 && ! ownProps.rootClientId ) {\n\t\t\t\t\t\t// removing the last block is not possible with `removeBlock` action\n\t\t\t\t\t\t// it always inserts a default block if the last of the blocks have been removed\n\t\t\t\t\t\tclearSelectedBlock();\n\t\t\t\t\t\tresetBlocks( [] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst blockToReplace = getBlockOrder(\n\t\t\t\t\t\t\townProps.destinationRootClientId\n\t\t\t\t\t\t)[ ownProps.insertionIndex ];\n\n\t\t\t\t\t\tremoveBlock( blockToReplace, false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshowInsertionPoint(\n\t\t\t\t\townProps.destinationRootClientId,\n\t\t\t\t\townProps.insertionIndex\n\t\t\t\t);\n\t\t\t},\n\t\t\thideInsertionPoint,\n\t\t\tonSelect( item ) {\n\t\t\t\tconst { name, initialAttributes, innerBlocks } = item;\n\n\t\t\t\tconst insertedBlock = createBlock(\n\t\t\t\t\tname,\n\t\t\t\t\tinitialAttributes,\n\t\t\t\t\tinnerBlocks\n\t\t\t\t);\n\n\t\t\t\tinsertBlock(\n\t\t\t\t\tinsertedBlock,\n\t\t\t\t\townProps.insertionIndex,\n\t\t\t\t\townProps.destinationRootClientId\n\t\t\t\t);\n\n\t\t\t\townProps.onSelect();\n\t\t\t},\n\t\t\tinsertDefaultBlock() {\n\t\t\t\tinsertDefaultBlock(\n\t\t\t\t\t{},\n\t\t\t\t\townProps.destinationRootClientId,\n\t\t\t\t\townProps.insertionIndex\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n\twithInstanceId\n)( InserterMenu );\n"]}