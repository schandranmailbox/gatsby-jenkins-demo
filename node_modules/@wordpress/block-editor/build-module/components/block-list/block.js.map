{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block.js"],"names":["classnames","omit","useState","createContext","useMemo","useCallback","getBlockType","getSaveElement","isReusableBlock","isUnmodifiedDefaultBlock","getUnregisteredTypeHandlerName","hasBlockSupport","getBlockDefaultClassName","withFilters","withDispatch","withSelect","useSelect","useDispatch","compose","pure","ifCondition","useViewportMatch","BlockEdit","BlockInvalidWarning","BlockCrashWarning","BlockCrashBoundary","BlockHtml","useBlockProps","BlockListBlockContext","mergeWrapperProps","propsA","propsB","newProps","className","style","Block","children","isHtml","props","__unstableIsHtml","BlockListBlock","mode","isLocked","clientId","isSelected","isMultiSelected","isPartOfMultiSelection","isFirstMultiSelected","isLastMultiSelected","isTypingWithinBlock","isAncestorOfSelectedBlock","isSelectionEnabled","name","isValid","attributes","wrapperProps","setAttributes","onReplace","onInsertBlocksAfter","onMerge","toggleSelection","index","enableAnimation","activeEntityBlockId","isLargeViewport","select","isBlockBeingDragged","isBlockHighlighted","getSettings","isDragging","isHighlighted","isFocusMode","focusMode","isOutlineMode","outlineMode","removeBlock","onRemove","hasError","setErrorState","onBlockError","blockType","lightBlockWrapper","apiVersion","isUnregisteredBlock","getEditWrapperProps","generatedClassName","customClassName","isAligned","wrapperClassName","blockEdit","undefined","alignmentWrapperProps","value","blockTitle","title","memoizedValue","Object","values","block","display","applyWithSelect","rootClientId","isBlockSelected","isAncestorMultiSelected","isBlockMultiSelected","isFirstMultiSelectedBlock","getLastMultiSelectedBlockClientId","isTyping","getBlockMode","hasSelectedInnerBlock","getTemplateLock","__unstableGetBlockWithoutInnerBlocks","getMultiSelectedBlockClientIds","templateLock","checkDeep","multiSelectedClientIds","applyWithDispatch","dispatch","ownProps","updateBlockAttributes","insertBlocks","mergeBlocks","replaceBlocks","__unstableMarkLastChangeAsPersistent","newAttributes","clientIds","onInsertBlocks","blocks","getBlockIndex","forward","getPreviousBlockClientId","getNextBlockClientId","nextBlockClientId","previousBlockClientId","indexToSelect","initialPosition","length","selectionEnabled"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tcreateContext,\n\tuseMemo,\n\tuseCallback,\n} from '@wordpress/element';\nimport {\n\tgetBlockType,\n\tgetSaveElement,\n\tisReusableBlock,\n\tisUnmodifiedDefaultBlock,\n\tgetUnregisteredTypeHandlerName,\n\thasBlockSupport,\n\tgetBlockDefaultClassName,\n} from '@wordpress/blocks';\nimport { withFilters } from '@wordpress/components';\nimport {\n\twithDispatch,\n\twithSelect,\n\tuseSelect,\n\tuseDispatch,\n} from '@wordpress/data';\nimport {\n\tcompose,\n\tpure,\n\tifCondition,\n\tuseViewportMatch,\n} from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockCrashWarning from './block-crash-warning';\nimport BlockCrashBoundary from './block-crash-boundary';\nimport BlockHtml from './block-html';\nimport { useBlockProps } from './use-block-props';\n\nexport const BlockListBlockContext = createContext();\n\n/**\n * Merges wrapper props with special handling for classNames and styles.\n *\n * @param {Object} propsA\n * @param {Object} propsB\n *\n * @return {Object} Merged props.\n */\nfunction mergeWrapperProps( propsA, propsB ) {\n\tconst newProps = {\n\t\t...propsA,\n\t\t...propsB,\n\t};\n\n\tif ( propsA && propsB && propsA.className && propsB.className ) {\n\t\tnewProps.className = classnames( propsA.className, propsB.className );\n\t}\n\tif ( propsA && propsB && propsA.style && propsB.style ) {\n\t\tnewProps.style = { ...propsA.style, ...propsB.style };\n\t}\n\n\treturn newProps;\n}\n\nfunction Block( { children, isHtml, ...props } ) {\n\treturn (\n\t\t<div { ...useBlockProps( props, { __unstableIsHtml: isHtml } ) }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\nfunction BlockListBlock( {\n\tmode,\n\tisLocked,\n\tclientId,\n\tisSelected,\n\tisMultiSelected,\n\tisPartOfMultiSelection,\n\tisFirstMultiSelected,\n\tisLastMultiSelected,\n\tisTypingWithinBlock,\n\tisAncestorOfSelectedBlock,\n\tisSelectionEnabled,\n\tclassName,\n\tname,\n\tisValid,\n\tattributes,\n\twrapperProps,\n\tsetAttributes,\n\tonReplace,\n\tonInsertBlocksAfter,\n\tonMerge,\n\ttoggleSelection,\n\tindex,\n\tenableAnimation,\n\tactiveEntityBlockId,\n} ) {\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\t// In addition to withSelect, we should favor using useSelect in this\n\t// component going forward to avoid leaking new props to the public API\n\t// (editor.BlockListBlock filter)\n\tconst { isDragging, isHighlighted, isFocusMode, isOutlineMode } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tisBlockBeingDragged,\n\t\t\t\tisBlockHighlighted,\n\t\t\t\tgetSettings,\n\t\t\t} = select( 'core/block-editor' );\n\t\t\treturn {\n\t\t\t\tisDragging: isBlockBeingDragged( clientId ),\n\t\t\t\tisHighlighted: isBlockHighlighted( clientId ),\n\t\t\t\tisFocusMode: getSettings().focusMode,\n\t\t\t\tisOutlineMode: getSettings().outlineMode,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { removeBlock } = useDispatch( 'core/block-editor' );\n\tconst onRemove = useCallback( () => removeBlock( clientId ), [ clientId ] );\n\n\t// Handling the error state\n\tconst [ hasError, setErrorState ] = useState( false );\n\tconst onBlockError = () => setErrorState( true );\n\n\tconst blockType = getBlockType( name );\n\tconst lightBlockWrapper =\n\t\tblockType.apiVersion > 1 ||\n\t\thasBlockSupport( blockType, 'lightBlockWrapper', false );\n\tconst isUnregisteredBlock = name === getUnregisteredTypeHandlerName();\n\n\t// Determine whether the block has props to apply to the wrapper.\n\tif ( blockType.getEditWrapperProps ) {\n\t\twrapperProps = mergeWrapperProps(\n\t\t\twrapperProps,\n\t\t\tblockType.getEditWrapperProps( attributes )\n\t\t);\n\t}\n\n\tconst generatedClassName =\n\t\tlightBlockWrapper && hasBlockSupport( blockType, 'className', true )\n\t\t\t? getBlockDefaultClassName( name )\n\t\t\t: null;\n\tconst customClassName = lightBlockWrapper ? attributes.className : null;\n\tconst isAligned = wrapperProps && !! wrapperProps[ 'data-align' ];\n\n\t// The wp-block className is important for editor styles.\n\t// Generate the wrapper class names handling the different states of the\n\t// block.\n\tconst wrapperClassName = classnames(\n\t\tgeneratedClassName,\n\t\tcustomClassName,\n\t\t'block-editor-block-list__block',\n\t\t{\n\t\t\t'wp-block': ! isAligned,\n\t\t\t'has-warning': ! isValid || !! hasError || isUnregisteredBlock,\n\t\t\t'is-selected': isSelected && ! isDragging,\n\t\t\t'is-highlighted': isHighlighted,\n\t\t\t'is-multi-selected': isMultiSelected,\n\t\t\t'is-reusable': isReusableBlock( blockType ),\n\t\t\t'is-dragging': isDragging,\n\t\t\t'is-typing': isTypingWithinBlock,\n\t\t\t'is-focused':\n\t\t\t\tisFocusMode &&\n\t\t\t\tisLargeViewport &&\n\t\t\t\t( isSelected || isAncestorOfSelectedBlock ),\n\t\t\t'is-focus-mode': isFocusMode && isLargeViewport,\n\t\t\t'is-outline-mode': isOutlineMode,\n\t\t\t'has-child-selected': isAncestorOfSelectedBlock && ! isDragging,\n\t\t\t'is-active-entity': activeEntityBlockId === clientId,\n\t\t},\n\t\tclassName\n\t);\n\n\t// We wrap the BlockEdit component in a div that hides it when editing in\n\t// HTML mode. This allows us to render all of the ancillary pieces\n\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\n\t// `BlockHTML`, even in HTML mode.\n\tlet blockEdit = (\n\t\t<BlockEdit\n\t\t\tname={ name }\n\t\t\tisSelected={ isSelected }\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tinsertBlocksAfter={ isLocked ? undefined : onInsertBlocksAfter }\n\t\t\tonReplace={ isLocked ? undefined : onReplace }\n\t\t\tonRemove={ isLocked ? undefined : onRemove }\n\t\t\tmergeBlocks={ isLocked ? undefined : onMerge }\n\t\t\tclientId={ clientId }\n\t\t\tisSelectionEnabled={ isSelectionEnabled }\n\t\t\ttoggleSelection={ toggleSelection }\n\t\t/>\n\t);\n\n\t// For aligned blocks, provide a wrapper element so the block can be\n\t// positioned relative to the block column.\n\tif ( isAligned ) {\n\t\tconst alignmentWrapperProps = {\n\t\t\t'data-align': wrapperProps[ 'data-align' ],\n\t\t};\n\t\tblockEdit = (\n\t\t\t<div className=\"wp-block\" { ...alignmentWrapperProps }>\n\t\t\t\t{ blockEdit }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst value = {\n\t\tclientId,\n\t\tisSelected,\n\t\tisFirstMultiSelected,\n\t\tisLastMultiSelected,\n\t\tisPartOfMultiSelection,\n\t\tenableAnimation,\n\t\tindex,\n\t\tclassName: wrapperClassName,\n\t\tisLocked,\n\t\tname,\n\t\tmode,\n\t\tblockTitle: blockType.title,\n\t\twrapperProps: omit( wrapperProps, [ 'data-align' ] ),\n\t};\n\tconst memoizedValue = useMemo( () => value, Object.values( value ) );\n\n\tlet block;\n\n\tif ( ! isValid ) {\n\t\tblock = (\n\t\t\t<Block>\n\t\t\t\t<BlockInvalidWarning clientId={ clientId } />\n\t\t\t\t<div>{ getSaveElement( blockType, attributes ) }</div>\n\t\t\t</Block>\n\t\t);\n\t} else if ( mode === 'html' ) {\n\t\t// Render blockEdit so the inspector controls don't disappear.\n\t\t// See #8969.\n\t\tblock = (\n\t\t\t<>\n\t\t\t\t<div style={ { display: 'none' } }>{ blockEdit }</div>\n\t\t\t\t<Block isHtml>\n\t\t\t\t\t<BlockHtml clientId={ clientId } />\n\t\t\t\t</Block>\n\t\t\t</>\n\t\t);\n\t} else if ( lightBlockWrapper ) {\n\t\tblock = blockEdit;\n\t} else {\n\t\tblock = <Block { ...wrapperProps }>{ blockEdit }</Block>;\n\t}\n\n\treturn (\n\t\t<BlockListBlockContext.Provider value={ memoizedValue }>\n\t\t\t<BlockCrashBoundary onError={ onBlockError }>\n\t\t\t\t{ block }\n\t\t\t</BlockCrashBoundary>\n\t\t\t{ !! hasError && (\n\t\t\t\t<Block>\n\t\t\t\t\t<BlockCrashWarning />\n\t\t\t\t</Block>\n\t\t\t) }\n\t\t</BlockListBlockContext.Provider>\n\t);\n}\n\nconst applyWithSelect = withSelect( ( select, { clientId, rootClientId } ) => {\n\tconst {\n\t\tisBlockSelected,\n\t\tisAncestorMultiSelected,\n\t\tisBlockMultiSelected,\n\t\tisFirstMultiSelectedBlock,\n\t\tgetLastMultiSelectedBlockClientId,\n\t\tisTyping,\n\t\tgetBlockMode,\n\t\tisSelectionEnabled,\n\t\thasSelectedInnerBlock,\n\t\tgetTemplateLock,\n\t\t__unstableGetBlockWithoutInnerBlocks,\n\t\tgetMultiSelectedBlockClientIds,\n\t} = select( 'core/block-editor' );\n\tconst block = __unstableGetBlockWithoutInnerBlocks( clientId );\n\tconst isSelected = isBlockSelected( clientId );\n\tconst templateLock = getTemplateLock( rootClientId );\n\tconst checkDeep = true;\n\n\t// \"ancestor\" is the more appropriate label due to \"deep\" check\n\tconst isAncestorOfSelectedBlock = hasSelectedInnerBlock(\n\t\tclientId,\n\t\tcheckDeep\n\t);\n\n\t// The fallback to `{}` is a temporary fix.\n\t// This function should never be called when a block is not present in\n\t// the state. It happens now because the order in withSelect rendering\n\t// is not correct.\n\tconst { name, attributes, isValid } = block || {};\n\tconst isFirstMultiSelected = isFirstMultiSelectedBlock( clientId );\n\n\t// Do not add new properties here, use `useSelect` instead to avoid\n\t// leaking new props to the public API (editor.BlockListBlock filter).\n\treturn {\n\t\tisMultiSelected: isBlockMultiSelected( clientId ),\n\t\tisPartOfMultiSelection:\n\t\t\tisBlockMultiSelected( clientId ) ||\n\t\t\tisAncestorMultiSelected( clientId ),\n\t\tisFirstMultiSelected,\n\t\tisLastMultiSelected: getLastMultiSelectedBlockClientId() === clientId,\n\t\tmultiSelectedClientIds: isFirstMultiSelected\n\t\t\t? getMultiSelectedBlockClientIds()\n\t\t\t: undefined,\n\n\t\t// We only care about this prop when the block is selected\n\t\t// Thus to avoid unnecessary rerenders we avoid updating the prop if\n\t\t// the block is not selected.\n\t\tisTypingWithinBlock:\n\t\t\t( isSelected || isAncestorOfSelectedBlock ) && isTyping(),\n\n\t\tmode: getBlockMode( clientId ),\n\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\tisLocked: !! templateLock,\n\n\t\t// Users of the editor.BlockListBlock filter used to be able to\n\t\t// access the block prop.\n\t\t// Ideally these blocks would rely on the clientId prop only.\n\t\t// This is kept for backward compatibility reasons.\n\t\tblock,\n\n\t\tname,\n\t\tattributes,\n\t\tisValid,\n\t\tisSelected,\n\t\tisAncestorOfSelectedBlock,\n\t};\n} );\n\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, { select } ) => {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tinsertBlocks,\n\t\tmergeBlocks,\n\t\treplaceBlocks,\n\t\ttoggleSelection,\n\t\t__unstableMarkLastChangeAsPersistent,\n\t} = dispatch( 'core/block-editor' );\n\n\t// Do not add new properties here, use `useDispatch` instead to avoid\n\t// leaking new props to the public API (editor.BlockListBlock filter).\n\treturn {\n\t\tsetAttributes( newAttributes ) {\n\t\t\tconst {\n\t\t\t\tclientId,\n\t\t\t\tisFirstMultiSelected,\n\t\t\t\tmultiSelectedClientIds,\n\t\t\t} = ownProps;\n\t\t\tconst clientIds = isFirstMultiSelected\n\t\t\t\t? multiSelectedClientIds\n\t\t\t\t: [ clientId ];\n\n\t\t\tupdateBlockAttributes( clientIds, newAttributes );\n\t\t},\n\t\tonInsertBlocks( blocks, index ) {\n\t\t\tconst { rootClientId } = ownProps;\n\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t},\n\t\tonInsertBlocksAfter( blocks ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst { getBlockIndex } = select( 'core/block-editor' );\n\t\t\tconst index = getBlockIndex( clientId, rootClientId );\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\n\t\t},\n\t\tonMerge( forward ) {\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst { getPreviousBlockClientId, getNextBlockClientId } = select(\n\t\t\t\t'core/block-editor'\n\t\t\t);\n\n\t\t\tif ( forward ) {\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\t\t\t\tif ( nextBlockClientId ) {\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst previousBlockClientId = getPreviousBlockClientId(\n\t\t\t\t\tclientId\n\t\t\t\t);\n\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonReplace( blocks, indexToSelect, initialPosition ) {\n\t\t\tif (\n\t\t\t\tblocks.length &&\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\n\t\t\t) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t\treplaceBlocks(\n\t\t\t\t[ ownProps.clientId ],\n\t\t\t\tblocks,\n\t\t\t\tindexToSelect,\n\t\t\t\tinitialPosition\n\t\t\t);\n\t\t},\n\t\ttoggleSelection( selectionEnabled ) {\n\t\t\ttoggleSelection( selectionEnabled );\n\t\t},\n\t};\n} );\n\nexport default compose(\n\tpure,\n\tapplyWithSelect,\n\tapplyWithDispatch,\n\t// block is sometimes not mounted at the right time, causing it be undefined\n\t// see issue for more info\n\t// https://github.com/WordPress/gutenberg/issues/17013\n\tifCondition( ( { block } ) => !! block ),\n\twithFilters( 'editor.BlockListBlock' )\n)( BlockListBlock );\n"]}