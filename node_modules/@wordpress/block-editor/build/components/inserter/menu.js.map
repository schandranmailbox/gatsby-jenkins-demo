{"version":3,"sources":["@wordpress/block-editor/src/components/inserter/menu.js"],"names":["InserterMenu","rootClientId","clientId","isAppender","__experimentalSelectBlockOnInsert","__experimentalInsertionIndex","onSelect","showInserterHelpPanel","showMostUsedBlocks","filterValue","setFilterValue","hoveredItem","setHoveredItem","selectedPatternCategory","setSelectedPatternCategory","selectBlockOnInsert","insertionIndex","destinationRootClientId","onInsertBlocks","onToggleInsertionPoint","select","getSettings","__experimentalBlockPatterns","__experimentalReusableBlocks","hasPatterns","length","hasReusableBlocks","showPatterns","onInsert","blocks","onInsertPattern","patternName","onHover","item","onClickPatternCategory","patternCategory","blocksTab","patternsTab","reusableBlocksTab","getCurrentTab","tab","name","value"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useState, useCallback, useMemo } from '@wordpress/element';\nimport { VisuallyHidden } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Tips from './tips';\nimport InserterSearchForm from './search-form';\nimport InserterPreviewPanel from './preview-panel';\nimport BlockTypesTab from './block-types-tab';\nimport BlockPatternsTabs from './block-patterns-tab';\nimport ReusableBlocksTab from './reusable-blocks-tab';\nimport InserterSearchResults from './search-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport InserterTabs from './tabs';\n\nfunction InserterMenu( {\n\trootClientId,\n\tclientId,\n\tisAppender,\n\t__experimentalSelectBlockOnInsert,\n\t__experimentalInsertionIndex,\n\tonSelect,\n\tshowInserterHelpPanel,\n\tshowMostUsedBlocks,\n} ) {\n\tconst [ filterValue, setFilterValue ] = useState( '' );\n\tconst [ hoveredItem, setHoveredItem ] = useState( null );\n\tconst [ selectedPatternCategory, setSelectedPatternCategory ] = useState(\n\t\tnull\n\t);\n\n\tconst [\n\t\tdestinationRootClientId,\n\t\tonInsertBlocks,\n\t\tonToggleInsertionPoint,\n\t] = useInsertionPoint( {\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tselectBlockOnInsert: __experimentalSelectBlockOnInsert,\n\t\tinsertionIndex: __experimentalInsertionIndex,\n\t} );\n\tconst { hasPatterns, hasReusableBlocks } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\t__experimentalBlockPatterns,\n\t\t\t__experimentalReusableBlocks,\n\t\t} = select( 'core/block-editor' ).getSettings();\n\n\t\treturn {\n\t\t\thasPatterns: !! __experimentalBlockPatterns?.length,\n\t\t\thasReusableBlocks: !! __experimentalReusableBlocks?.length,\n\t\t};\n\t}, [] );\n\n\tconst showPatterns = ! destinationRootClientId && hasPatterns;\n\n\tconst onInsert = useCallback(\n\t\t( blocks ) => {\n\t\t\tonInsertBlocks( blocks );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onInsertPattern = useCallback(\n\t\t( blocks, patternName ) => {\n\t\t\tonInsertBlocks( blocks, { patternName } );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onHover = useCallback(\n\t\t( item ) => {\n\t\t\tonToggleInsertionPoint( !! item );\n\t\t\tsetHoveredItem( item );\n\t\t},\n\t\t[ onToggleInsertionPoint, setHoveredItem ]\n\t);\n\n\tconst onClickPatternCategory = useCallback(\n\t\t( patternCategory ) => {\n\t\t\tsetSelectedPatternCategory( patternCategory );\n\t\t},\n\t\t[ setSelectedPatternCategory ]\n\t);\n\n\tconst blocksTab = useMemo(\n\t\t() => (\n\t\t\t<>\n\t\t\t\t<div className=\"block-editor-inserter__block-list\">\n\t\t\t\t\t<BlockTypesTab\n\t\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{ showInserterHelpPanel && (\n\t\t\t\t\t<div className=\"block-editor-inserter__tips\">\n\t\t\t\t\t\t<VisuallyHidden as=\"h2\">\n\t\t\t\t\t\t\t{ __( 'A tip for using the block editor' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<Tips />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsert,\n\t\t\tonHover,\n\t\t\tfilterValue,\n\t\t\tshowMostUsedBlocks,\n\t\t\tshowInserterHelpPanel,\n\t\t]\n\t);\n\n\tconst patternsTab = useMemo(\n\t\t() => (\n\t\t\t<BlockPatternsTabs\n\t\t\t\tonInsert={ onInsertPattern }\n\t\t\t\tonClickCategory={ onClickPatternCategory }\n\t\t\t\tselectedCategory={ selectedPatternCategory }\n\t\t\t/>\n\t\t),\n\t\t[ onInsertPattern, onClickPatternCategory, selectedPatternCategory ]\n\t);\n\n\tconst reusableBlocksTab = useMemo(\n\t\t() => (\n\t\t\t<ReusableBlocksTab\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tonHover={ onHover }\n\t\t\t/>\n\t\t),\n\t\t[ destinationRootClientId, onInsert, onHover ]\n\t);\n\n\tconst getCurrentTab = useCallback(\n\t\t( tab ) => {\n\t\t\tif ( tab.name === 'blocks' ) {\n\t\t\t\treturn blocksTab;\n\t\t\t} else if ( tab.name === 'patterns' ) {\n\t\t\t\treturn patternsTab;\n\t\t\t}\n\t\t\treturn reusableBlocksTab;\n\t\t},\n\t\t[ blocksTab, patternsTab, reusableBlocksTab ]\n\t);\n\n\treturn (\n\t\t<div className=\"block-editor-inserter__menu\">\n\t\t\t<div className=\"block-editor-inserter__main-area\">\n\t\t\t\t{ /* the following div is necessary to fix the sticky position of the search form */ }\n\t\t\t\t<div className=\"block-editor-inserter__content\">\n\t\t\t\t\t<InserterSearchForm\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tif ( hoveredItem ) setHoveredItem( null );\n\t\t\t\t\t\t\tsetFilterValue( value );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ filterValue }\n\t\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t{ !! filterValue && (\n\t\t\t\t\t\t<InserterSearchResults\n\t\t\t\t\t\t\tfilterValue={ filterValue }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\t\t\tselectBlockOnInsert={\n\t\t\t\t\t\t\t\t__experimentalSelectBlockOnInsert\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowBlockDirectory\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! filterValue && ( showPatterns || hasReusableBlocks ) && (\n\t\t\t\t\t\t<InserterTabs\n\t\t\t\t\t\t\tshowPatterns={ showPatterns }\n\t\t\t\t\t\t\tshowReusableBlocks={ hasReusableBlocks }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ getCurrentTab }\n\t\t\t\t\t\t</InserterTabs>\n\t\t\t\t\t) }\n\t\t\t\t\t{ ! filterValue &&\n\t\t\t\t\t\t! showPatterns &&\n\t\t\t\t\t\t! hasReusableBlocks &&\n\t\t\t\t\t\tblocksTab }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ showInserterHelpPanel && hoveredItem && (\n\t\t\t\t<InserterPreviewPanel item={ hoveredItem } />\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default InserterMenu;\n"]}