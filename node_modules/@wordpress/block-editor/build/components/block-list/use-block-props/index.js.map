{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/use-block-props/index.js"],"names":["useBlockProps","props","__unstableIsHtml","fallbackRef","ref","setBlockNodes","SetBlockNodes","BlockListBlockContext","clientId","isSelected","isFirstMultiSelected","isLastMultiSelected","isPartOfMultiSelection","enableAnimation","index","className","name","mode","blockTitle","wrapperProps","node","current","nodes","blockLabel","isHovered","blockMovingModeClassNames","htmlSuffix","id","tabIndex","role","style","save","getBlockProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useEffect, useContext } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { __unstableGetBlockProps as getBlockProps } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport useMovingAnimation from '../../use-moving-animation';\nimport { SetBlockNodes } from '../';\nimport { BlockListBlockContext } from '../block';\nimport { useFocusFirstElement } from './use-focus-first-element';\nimport { useIsHovered } from './use-is-hovered';\nimport { useBlockMovingModeClassNames } from './use-block-moving-mode-class-names';\nimport { useEventHandlers } from './use-event-handlers';\n\n/**\n * This hook is used to lightly mark an element as a block element. The element\n * should be the outermost element of a block. Call this hook and pass the\n * returned props to the element to mark as a block. If you define a ref for the\n * element, it is important to pass the ref to this hook, which the hook in turn\n * will pass to the component through the props it returns. Optionally, you can\n * also pass any other props through this hook, and they will be merged and\n * returned.\n *\n * @param {Object}  props   Optional. Props to pass to the element. Must contain\n *                          the ref if one is defined.\n * @param {Object}  options Options for internal use only.\n * @param {boolean} options.__unstableIsHtml\n *\n * @return {Object} Props to pass to the element to mark as a block.\n */\nexport function useBlockProps( props = {}, { __unstableIsHtml } = {} ) {\n\tconst fallbackRef = useRef();\n\tconst ref = props.ref || fallbackRef;\n\tconst setBlockNodes = useContext( SetBlockNodes );\n\tconst {\n\t\tclientId,\n\t\tisSelected,\n\t\tisFirstMultiSelected,\n\t\tisLastMultiSelected,\n\t\tisPartOfMultiSelection,\n\t\tenableAnimation,\n\t\tindex,\n\t\tclassName,\n\t\tname,\n\t\tmode,\n\t\tblockTitle,\n\t\twrapperProps = {},\n\t} = useContext( BlockListBlockContext );\n\n\t// Provide the selected node, or the first and last nodes of a multi-\n\t// selection, so it can be used to position the contextual block toolbar.\n\t// We only provide what is necessary, and remove the nodes again when they\n\t// are no longer selected.\n\tuseEffect( () => {\n\t\tif ( isSelected || isFirstMultiSelected || isLastMultiSelected ) {\n\t\t\tconst node = ref.current;\n\t\t\tsetBlockNodes( ( nodes ) => ( {\n\t\t\t\t...nodes,\n\t\t\t\t[ clientId ]: node,\n\t\t\t} ) );\n\t\t\treturn () => {\n\t\t\t\tsetBlockNodes( ( nodes ) => omit( nodes, clientId ) );\n\t\t\t};\n\t\t}\n\t}, [ isSelected, isFirstMultiSelected, isLastMultiSelected ] );\n\n\t// Set new block node if it changes.\n\t// This effect should happen on every render, so no dependencies should be\n\t// added.\n\tuseEffect( () => {\n\t\tconst node = ref.current;\n\t\tsetBlockNodes( ( nodes ) => {\n\t\t\tif ( ! nodes[ clientId ] || nodes[ clientId ] === node ) {\n\t\t\t\treturn nodes;\n\t\t\t}\n\n\t\t\treturn { ...nodes, [ clientId ]: node };\n\t\t} );\n\t} );\n\n\t// translators: %s: Type of block (i.e. Text, Image etc)\n\tconst blockLabel = sprintf( __( 'Block: %s' ), blockTitle );\n\n\tuseFocusFirstElement( ref, clientId );\n\tuseEventHandlers( ref, clientId );\n\n\t// Block Reordering animation\n\tuseMovingAnimation(\n\t\tref,\n\t\tisSelected || isPartOfMultiSelection,\n\t\tisSelected || isFirstMultiSelected,\n\t\tenableAnimation,\n\t\tindex\n\t);\n\n\tconst isHovered = useIsHovered( ref );\n\tconst blockMovingModeClassNames = useBlockMovingModeClassNames( clientId );\n\tconst htmlSuffix = mode === 'html' && ! __unstableIsHtml ? '-visual' : '';\n\n\treturn {\n\t\t...wrapperProps,\n\t\t...props,\n\t\tref,\n\t\tid: `block-${ clientId }${ htmlSuffix }`,\n\t\ttabIndex: 0,\n\t\trole: 'group',\n\t\t'aria-label': blockLabel,\n\t\t'data-block': clientId,\n\t\t'data-type': name,\n\t\t'data-title': blockTitle,\n\t\tclassName: classnames(\n\t\t\tclassName,\n\t\t\tprops.className,\n\t\t\twrapperProps.className,\n\t\t\tblockMovingModeClassNames,\n\t\t\t{ 'is-hovered': isHovered }\n\t\t),\n\t\tstyle: { ...wrapperProps.style, ...props.style },\n\t};\n}\n\n/**\n * Call within a save function to get the props for the block wrapper.\n *\n * @param {Object} props Optional. Props to pass to the element.\n */\nuseBlockProps.save = getBlockProps;\n"]}