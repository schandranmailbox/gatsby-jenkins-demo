{"version":3,"sources":["@wordpress/block-library/src/post-author/edit.js"],"names":["PostAuthorEdit","isSelected","context","attributes","setAttributes","postType","postId","select","getEditedEntityRecord","getUser","getUsers","_authorId","author","authorId","authorDetails","authors","who","editEntityRecord","textAlign","showAvatar","showBio","byline","avatarSizes","avatar_urls","url","size","push","value","label","blockProps","className","length","map","id","name","nextAuthorId","avatarSize","Number","nextAlign","RichText","isEmpty","description"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { forEach } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAlignmentToolbar,\n\tBlockControls,\n\tInspectorControls,\n\tRichText,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport { PanelBody, SelectControl, ToggleControl } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\nfunction PostAuthorEdit( { isSelected, context, attributes, setAttributes } ) {\n\tconst { postType, postId } = context;\n\n\tconst { authorId, authorDetails, authors } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedEntityRecord, getUser, getUsers } = select(\n\t\t\t\t'core'\n\t\t\t);\n\t\t\tconst _authorId = getEditedEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\tpostType,\n\t\t\t\tpostId\n\t\t\t)?.author;\n\n\t\t\treturn {\n\t\t\t\tauthorId: _authorId,\n\t\t\t\tauthorDetails: _authorId ? getUser( _authorId ) : null,\n\t\t\t\tauthors: getUsers( { who: 'authors' } ),\n\t\t\t};\n\t\t},\n\t\t[ postType, postId ]\n\t);\n\n\tconst { editEntityRecord } = useDispatch( 'core' );\n\n\tconst { textAlign, showAvatar, showBio, byline } = attributes;\n\n\tconst avatarSizes = [];\n\tif ( authorDetails ) {\n\t\tforEach( authorDetails.avatar_urls, ( url, size ) => {\n\t\t\tavatarSizes.push( {\n\t\t\t\tvalue: size,\n\t\t\t\tlabel: `${ size } x ${ size }`,\n\t\t\t} );\n\t\t} );\n\t}\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: classnames( {\n\t\t\t[ `has-text-align-${ textAlign }` ]: textAlign,\n\t\t} ),\n\t} );\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Author Settings' ) }>\n\t\t\t\t\t{ !! authors?.length && (\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Author' ) }\n\t\t\t\t\t\t\tvalue={ authorId }\n\t\t\t\t\t\t\toptions={ authors.map( ( { id, name } ) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tvalue: id,\n\t\t\t\t\t\t\t\t\tlabel: name,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\tonChange={ ( nextAuthorId ) => {\n\t\t\t\t\t\t\t\teditEntityRecord(\n\t\t\t\t\t\t\t\t\t'postType',\n\t\t\t\t\t\t\t\t\tpostType,\n\t\t\t\t\t\t\t\t\tpostId,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tauthor: nextAuthorId,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Show avatar' ) }\n\t\t\t\t\t\tchecked={ showAvatar }\n\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\tsetAttributes( { showAvatar: ! showAvatar } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t{ showAvatar && (\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Avatar size' ) }\n\t\t\t\t\t\t\tvalue={ attributes.avatarSize }\n\t\t\t\t\t\t\toptions={ avatarSizes }\n\t\t\t\t\t\t\tonChange={ ( size ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tavatarSize: Number( size ),\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Show bio' ) }\n\t\t\t\t\t\tchecked={ showBio }\n\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\tsetAttributes( { showBio: ! showBio } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\n\t\t\t<BlockControls>\n\t\t\t\t<AlignmentToolbar\n\t\t\t\t\tvalue={ textAlign }\n\t\t\t\t\tonChange={ ( nextAlign ) => {\n\t\t\t\t\t\tsetAttributes( { textAlign: nextAlign } );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\n\t\t\t<div { ...blockProps }>\n\t\t\t\t{ showAvatar && authorDetails && (\n\t\t\t\t\t<div className=\"wp-block-post-author__avatar\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\twidth={ attributes.avatarSize }\n\t\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\t\tauthorDetails.avatar_urls[\n\t\t\t\t\t\t\t\t\tattributes.avatarSize\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talt={ authorDetails.name }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t<div className=\"wp-block-post-author__content\">\n\t\t\t\t\t{ ( ! RichText.isEmpty( byline ) || isSelected ) && (\n\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\tclassName=\"wp-block-post-author__byline\"\n\t\t\t\t\t\t\tmultiline={ false }\n\t\t\t\t\t\t\taria-label={ __( 'Post author byline text' ) }\n\t\t\t\t\t\t\tplaceholder={ __( 'Write bylineâ€¦' ) }\n\t\t\t\t\t\t\tvalue={ byline }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { byline: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<p className=\"wp-block-post-author__name\">\n\t\t\t\t\t\t{ authorDetails?.name || __( 'Post Author' ) }\n\t\t\t\t\t</p>\n\t\t\t\t\t{ showBio && (\n\t\t\t\t\t\t<p className=\"wp-block-post-author__bio\">\n\t\t\t\t\t\t\t{ authorDetails?.description }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport default PostAuthorEdit;\n"]}