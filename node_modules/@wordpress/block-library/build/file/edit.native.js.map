{"version":3,"sources":["@wordpress/block-library/src/file/edit.native.js"],"names":["URL_COPIED_NOTIFICATION_DURATION_MS","MIN_WIDTH","FileEdit","props","state","isUploadInProgress","isSidebarLinkSettings","placeholderTextWidth","maxWidth","timerRef","onLayout","bind","onSelectFile","onChangeFileName","onChangeDownloadButtonText","updateMediaProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","getFileComponent","onChangeDownloadButtonVisibility","onCopyURL","onChangeOpenInNewWindow","onChangeLinkDestinationOption","onShowLinkSettings","onFilePressed","mediaUploadStateReset","attributes","setAttributes","downloadButtonText","undefined","id","url","clearTimeout","prevProps","isSidebarOpened","setState","media","href","fileName","title","textLinkHref","showDownloadButton","newHref","isUrlCopied","Clipboard","setString","setTimeout","newValue","textLinkTarget","payload","mediaUrl","mediaServerId","mediaId","openSidebar","open","replace","link","isUploadFailed","linkDestinationOptions","value","label","attachmentPage","actionButtonStyle","getStylesFromColorScheme","styles","actionButton","actionButtonDark","isCopyUrlDisabled","dimmedActionButtonStyle","dimmedActionButton","dimmedActionButtonDark","finalButtonStyle","external","button","align","getFlexAlign","alignment","alignSelf","nativeEvent","width","layout","defaultButton","paddingLeft","paddingRight","placeholderText","placeholder","textWidth","lines","Math","min","openMediaOptions","getMediaOptions","isSelected","isButtonFocused","minWidth","dimmedStyle","disabledButton","errorIconStyle","Object","assign","errorIcon","uploadFailed","getPlaceholderWidth","getToolbarEditButton","getInspectorControls","container","getTextAlignmentForAlignment","errorContainer","warning","getStyleForAlignment","buttonText","color","placeholderTextColor","icon","instructions","onFocus","MEDIA_TYPE_ANY","Component","select","isEditorSidebarOpened","isNotFileHref","getMedia","dispatch","openGeneralSidebar","withPreferredColorScheme"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Clipboard, TouchableWithoutFeedback, Text } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\tmediaUploadSync,\n} from '@wordpress/react-native-bridge';\nimport {\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaUploadProgress,\n\tRichText,\n\tPlainText,\n\tBlockControls,\n\tMediaUpload,\n\tInspectorControls,\n\tMEDIA_TYPE_ANY,\n} from '@wordpress/block-editor';\nimport {\n\tToolbarButton,\n\tToolbarGroup,\n\tPanelBody,\n\tToggleControl,\n\tTextControl,\n\tSelectControl,\n\tIcon,\n} from '@wordpress/components';\nimport {\n\tfile as icon,\n\treplace,\n\tbutton,\n\texternal,\n\tlink,\n\twarning,\n} from '@wordpress/icons';\nimport { Component } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { getProtocol } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst URL_COPIED_NOTIFICATION_DURATION_MS = 1500;\nconst MIN_WIDTH = 40;\n\nexport class FileEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisUploadInProgress: false,\n\t\t\tisSidebarLinkSettings: false,\n\t\t\tplaceholderTextWidth: 0,\n\t\t\tmaxWidth: 0,\n\t\t};\n\n\t\tthis.timerRef = null;\n\n\t\tthis.onLayout = this.onLayout.bind( this );\n\t\tthis.onSelectFile = this.onSelectFile.bind( this );\n\t\tthis.onChangeFileName = this.onChangeFileName.bind( this );\n\t\tthis.onChangeDownloadButtonText = this.onChangeDownloadButtonText.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess = this.finishMediaUploadWithSuccess.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.finishMediaUploadWithFailure = this.finishMediaUploadWithFailure.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.getFileComponent = this.getFileComponent.bind( this );\n\t\tthis.onChangeDownloadButtonVisibility = this.onChangeDownloadButtonVisibility.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onCopyURL = this.onCopyURL.bind( this );\n\t\tthis.onChangeOpenInNewWindow = this.onChangeOpenInNewWindow.bind(\n\t\t\tthis\n\t\t);\n\n\t\tthis.onChangeLinkDestinationOption = this.onChangeLinkDestinationOption.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onShowLinkSettings = this.onShowLinkSettings.bind( this );\n\t\tthis.onFilePressed = this.onFilePressed.bind( this );\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { attributes, setAttributes } = this.props;\n\t\tconst { downloadButtonText } = attributes;\n\n\t\tif ( downloadButtonText === undefined || downloadButtonText === '' ) {\n\t\t\tsetAttributes( {\n\t\t\t\tdownloadButtonText: _x( 'Download', 'button label' ),\n\t\t\t} );\n\t\t}\n\n\t\tif (\n\t\t\tattributes.id &&\n\t\t\tattributes.url &&\n\t\t\tgetProtocol( attributes.url ) === 'file:'\n\t\t) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.timerRef );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tprevProps.isSidebarOpened &&\n\t\t\t! this.props.isSidebarOpened &&\n\t\t\tthis.state.isSidebarLinkSettings\n\t\t) {\n\t\t\tthis.setState( { isSidebarLinkSettings: false } );\n\t\t}\n\t}\n\n\tonSelectFile( media ) {\n\t\tthis.props.setAttributes( {\n\t\t\thref: media.url,\n\t\t\tfileName: media.title,\n\t\t\ttextLinkHref: media.url,\n\t\t\tid: media.id,\n\t\t} );\n\t}\n\n\tonChangeFileName( fileName ) {\n\t\tthis.props.setAttributes( { fileName } );\n\t}\n\n\tonChangeDownloadButtonText( downloadButtonText ) {\n\t\tthis.props.setAttributes( { downloadButtonText } );\n\t}\n\n\tonChangeDownloadButtonVisibility( showDownloadButton ) {\n\t\tthis.props.setAttributes( { showDownloadButton } );\n\t}\n\n\tonChangeLinkDestinationOption( newHref ) {\n\t\t// Choose Media File or Attachment Page (when file is in Media Library)\n\t\tthis.props.setAttributes( { textLinkHref: newHref } );\n\t}\n\n\tonCopyURL() {\n\t\tif ( this.state.isUrlCopied ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { href } = this.props.attributes;\n\t\tClipboard.setString( href );\n\n\t\tthis.setState( { isUrlCopied: true } );\n\t\tthis.timerRef = setTimeout( () => {\n\t\t\tthis.setState( { isUrlCopied: false } );\n\t\t}, URL_COPIED_NOTIFICATION_DURATION_MS );\n\t}\n\n\tonChangeOpenInNewWindow( newValue ) {\n\t\tthis.props.setAttributes( {\n\t\t\ttextLinkTarget: newValue ? '_blank' : false,\n\t\t} );\n\t}\n\n\tupdateMediaProgress( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tif ( payload.mediaUrl ) {\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\n\t\t}\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\thref: payload.mediaUrl,\n\t\t\tid: payload.mediaServerId,\n\t\t\ttextLinkHref: payload.mediaUrl,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tthis.props.setAttributes( { id: payload.mediaId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tid: null,\n\t\t\thref: null,\n\t\t\ttextLinkHref: null,\n\t\t\tfileName: null,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tonShowLinkSettings() {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tisSidebarLinkSettings: true,\n\t\t\t},\n\t\t\tthis.props.openSidebar\n\t\t);\n\t}\n\n\tgetToolbarEditButton( open ) {\n\t\treturn (\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Edit file' ) }\n\t\t\t\t\t\ticon={ replace }\n\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Link To' ) }\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tonClick={ this.onShowLinkSettings }\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t);\n\t}\n\n\tgetInspectorControls(\n\t\t{ showDownloadButton, textLinkTarget, href, textLinkHref },\n\t\tmedia,\n\t\tisUploadInProgress,\n\t\tisUploadFailed\n\t) {\n\t\tlet linkDestinationOptions = [ { value: href, label: __( 'URL' ) } ];\n\t\tconst attachmentPage = media && media.link;\n\t\tconst { isSidebarLinkSettings } = this.state;\n\n\t\tif ( attachmentPage ) {\n\t\t\tlinkDestinationOptions = [\n\t\t\t\t{ value: href, label: __( 'Media file' ) },\n\t\t\t\t{ value: attachmentPage, label: __( 'Attachment page' ) },\n\t\t\t];\n\t\t}\n\n\t\tconst actionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.actionButton,\n\t\t\tstyles.actionButtonDark\n\t\t);\n\n\t\tconst isCopyUrlDisabled = isUploadFailed || isUploadInProgress;\n\n\t\tconst dimmedActionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.dimmedActionButton,\n\t\t\tstyles.dimmedActionButtonDark\n\t\t);\n\n\t\tconst finalButtonStyle = isCopyUrlDisabled\n\t\t\t? dimmedActionButtonStyle\n\t\t\t: actionButtonStyle;\n\n\t\treturn (\n\t\t\t<InspectorControls>\n\t\t\t\t{ isSidebarLinkSettings || (\n\t\t\t\t\t<PanelBody title={ __( 'File block settings' ) } />\n\t\t\t\t) }\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tlabel={ __( 'Link to' ) }\n\t\t\t\t\t\tvalue={ textLinkHref }\n\t\t\t\t\t\tonChange={ this.onChangeLinkDestinationOption }\n\t\t\t\t\t\toptions={ linkDestinationOptions }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\tchecked={ textLinkTarget === '_blank' }\n\t\t\t\t\t\tonChange={ this.onChangeOpenInNewWindow }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! isSidebarLinkSettings && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\ticon={ button }\n\t\t\t\t\t\t\tlabel={ __( 'Show download button' ) }\n\t\t\t\t\t\t\tchecked={ showDownloadButton }\n\t\t\t\t\t\t\tonChange={ this.onChangeDownloadButtonVisibility }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tdisabled={ isCopyUrlDisabled }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tthis.state.isUrlCopied\n\t\t\t\t\t\t\t\t? __( 'Copied!' )\n\t\t\t\t\t\t\t\t: __( 'Copy file URL' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlabelStyle={\n\t\t\t\t\t\t\tthis.state.isUrlCopied || finalButtonStyle\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonPress={ this.onCopyURL }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\t}\n\n\tgetStyleForAlignment( align ) {\n\t\tconst getFlexAlign = ( alignment ) => {\n\t\t\tswitch ( alignment ) {\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn 'flex-end';\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn 'center';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'flex-start';\n\t\t\t}\n\t\t};\n\t\treturn { alignSelf: getFlexAlign( align ) };\n\t}\n\n\tgetTextAlignmentForAlignment( align ) {\n\t\tswitch ( align ) {\n\t\t\tcase 'right':\n\t\t\t\treturn 'right';\n\t\t\tcase 'center':\n\t\t\t\treturn 'center';\n\t\t\tdefault:\n\t\t\t\treturn 'left';\n\t\t}\n\t}\n\n\tonFilePressed() {\n\t\tconst { attributes } = this.props;\n\n\t\tif ( this.state.isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( attributes.id );\n\t\t} else if (\n\t\t\tattributes.id &&\n\t\t\tgetProtocol( attributes.href ) === 'file:'\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( attributes.id );\n\t\t}\n\t}\n\n\tonLayout( { nativeEvent } ) {\n\t\tconst { width } = nativeEvent.layout;\n\t\tconst { paddingLeft, paddingRight } = styles.defaultButton;\n\t\tthis.setState( {\n\t\t\tmaxWidth: width - ( paddingLeft + paddingRight ),\n\t\t} );\n\t}\n\n\t// Render `Text` with `placeholderText` styled as a placeholder\n\t// to calculate its width which then is set as a `minWidth`\n\t// This should be fixed on RNAztec level. In the mean time,\n\t// We use the same strategy implemented in Button block\n\tgetPlaceholderWidth( placeholderText ) {\n\t\tconst { maxWidth, placeholderTextWidth } = this.state;\n\t\treturn (\n\t\t\t<Text\n\t\t\t\tstyle={ styles.placeholder }\n\t\t\t\tonTextLayout={ ( { nativeEvent } ) => {\n\t\t\t\t\tconst textWidth =\n\t\t\t\t\t\tnativeEvent.lines[ 0 ] && nativeEvent.lines[ 0 ].width;\n\t\t\t\t\tif ( textWidth && textWidth !== placeholderTextWidth ) {\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tplaceholderTextWidth: Math.min(\n\t\t\t\t\t\t\t\ttextWidth,\n\t\t\t\t\t\t\t\tmaxWidth\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ placeholderText }\n\t\t\t</Text>\n\t\t);\n\t}\n\n\tgetFileComponent( openMediaOptions, getMediaOptions ) {\n\t\tconst { attributes, media, isSelected } = this.props;\n\t\tconst { isButtonFocused, placeholderTextWidth } = this.state;\n\n\t\tconst {\n\t\t\tfileName,\n\t\t\tdownloadButtonText,\n\t\t\tid,\n\t\t\tshowDownloadButton,\n\t\t\talign,\n\t\t} = attributes;\n\n\t\tconst minWidth =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? MIN_WIDTH\n\t\t\t\t: placeholderTextWidth;\n\n\t\tconst placeholderText =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? ''\n\t\t\t\t: __( 'Add textâ€¦' );\n\n\t\treturn (\n\t\t\t<MediaUploadProgress\n\t\t\t\tmediaId={ id }\n\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t}\n\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t}\n\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\n\t\t\t\trenderContent={ ( { isUploadInProgress, isUploadFailed } ) => {\n\t\t\t\t\tconst dimmedStyle =\n\t\t\t\t\t\t( this.state.isUploadInProgress || isUploadFailed ) &&\n\t\t\t\t\t\tstyles.disabledButton;\n\t\t\t\t\tconst finalButtonStyle = [\n\t\t\t\t\t\tstyles.defaultButton,\n\t\t\t\t\t\tdimmedStyle,\n\t\t\t\t\t];\n\n\t\t\t\t\tconst errorIconStyle = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tstyles.errorIcon,\n\t\t\t\t\t\tstyles.uploadFailed\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\t\t\tonPress={ this.onFilePressed }\n\t\t\t\t\t\t\tonLongPress={ openMediaOptions }\n\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<View onLayout={ this.onLayout }>\n\t\t\t\t\t\t\t\t{ this.getPlaceholderWidth( placeholderText ) }\n\t\t\t\t\t\t\t\t{ isUploadInProgress ||\n\t\t\t\t\t\t\t\t\tthis.getToolbarEditButton(\n\t\t\t\t\t\t\t\t\t\topenMediaOptions\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ getMediaOptions() }\n\t\t\t\t\t\t\t\t{ isSelected &&\n\t\t\t\t\t\t\t\t\tthis.getInspectorControls(\n\t\t\t\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t\t\t\tmedia,\n\t\t\t\t\t\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\t\t\t\t\t\tisUploadFailed\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<View style={ styles.container }>\n\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\tonChange={ this.onChangeFileName }\n\t\t\t\t\t\t\t\t\t\tplaceholder={ __( 'File name' ) }\n\t\t\t\t\t\t\t\t\t\trootTagsToEliminate={ [ 'p' ] }\n\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\tvalue={ fileName }\n\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\ttextAlign={ this.getTextAlignmentForAlignment(\n\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t<View style={ styles.errorContainer }>\n\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ warning }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ errorIconStyle }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<PlainText\n\t\t\t\t\t\t\t\t\t\t\t\teditable={ false }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ __( 'Error' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.uploadFailed }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t{ showDownloadButton &&\n\t\t\t\t\t\t\t\t\tthis.state.maxWidth > 0 && (\n\t\t\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\t\t\t\tfinalButtonStyle,\n\t\t\t\t\t\t\t\t\t\t\t\tthis.getStyleForAlignment(\n\t\t\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\t\t\trootTagsToEliminate={ [ 'p' ] }\n\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth={ minWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth={ this.state.maxWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.buttonText }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ downloadButtonText }\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={ placeholderText }\n\t\t\t\t\t\t\t\t\t\t\t\tunstableOnFocus={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.buttonText.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.placeholderTextColor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.onChangeDownloadButtonText\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { attributes } = this.props;\n\t\tconst { href } = attributes;\n\n\t\tif ( ! href ) {\n\t\t\treturn (\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'File' ),\n\t\t\t\t\t\tinstructions: __( 'CHOOSE A FILE' ),\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\tisReplacingMedia={ true }\n\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\treturn this.getFileComponent( open, getMediaOptions );\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst { attributes } = props;\n\t\tconst { id, href } = attributes;\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\tconst isNotFileHref = id && getProtocol( href ) !== 'file:';\n\t\treturn {\n\t\t\tmedia: isNotFileHref ? select( 'core' ).getMedia( id ) : undefined,\n\t\t\tisSidebarOpened: isEditorSidebarOpened(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { openGeneralSidebar } = dispatch( 'core/edit-post' );\n\t\treturn {\n\t\t\topenSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( FileEdit );\n"]}