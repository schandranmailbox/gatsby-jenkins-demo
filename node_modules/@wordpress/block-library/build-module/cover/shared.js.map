{"version":3,"sources":["@wordpress/block-library/src/cover/shared.js"],"names":["getBlobTypeByURL","isBlobURL","__","Platform","POSITION_CLASSNAMES","center","IMAGE_BACKGROUND_TYPE","VIDEO_BACKGROUND_TYPE","COVER_MIN_HEIGHT","backgroundImageStyles","url","backgroundImage","isWeb","OS","CSS_UNITS","value","label","default","dimRatioToClass","ratio","Math","round","attributesFromMedia","setAttributes","media","undefined","id","type","mediaType","media_type","backgroundType","focalPoint","hasParallax","isContentPositionCenter","contentPosition","getPositionClassName"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { getBlobTypeByURL, isBlobURL } from '@wordpress/blob';\nimport { __ } from '@wordpress/i18n';\nimport { Platform } from '@wordpress/element';\n\nconst POSITION_CLASSNAMES = {\n\t'top left': 'is-position-top-left',\n\t'top center': 'is-position-top-center',\n\t'top right': 'is-position-top-right',\n\t'center left': 'is-position-center-left',\n\t'center center': 'is-position-center-center',\n\tcenter: 'is-position-center-center',\n\t'center right': 'is-position-center-right',\n\t'bottom left': 'is-position-bottom-left',\n\t'bottom center': 'is-position-bottom-center',\n\t'bottom right': 'is-position-bottom-right',\n};\n\nexport const IMAGE_BACKGROUND_TYPE = 'image';\nexport const VIDEO_BACKGROUND_TYPE = 'video';\nexport const COVER_MIN_HEIGHT = 50;\nexport function backgroundImageStyles( url ) {\n\treturn url ? { backgroundImage: `url(${ url })` } : {};\n}\n\nconst isWeb = Platform.OS === 'web';\n\nexport const CSS_UNITS = [\n\t{\n\t\tvalue: 'px',\n\t\tlabel: isWeb ? 'px' : __( 'Pixels (px)' ),\n\t\tdefault: '430',\n\t},\n\t{\n\t\tvalue: 'em',\n\t\tlabel: isWeb ? 'em' : __( 'Relative to parent font size (em)' ),\n\t\tdefault: '20',\n\t},\n\t{\n\t\tvalue: 'rem',\n\t\tlabel: isWeb ? 'rem' : __( 'Relative to root font size (rem)' ),\n\t\tdefault: '20',\n\t},\n\t{\n\t\tvalue: 'vw',\n\t\tlabel: isWeb ? 'vw' : __( 'Viewport width (vw)' ),\n\t\tdefault: '20',\n\t},\n\t{\n\t\tvalue: 'vh',\n\t\tlabel: isWeb ? 'vh' : __( 'Viewport height (vh)' ),\n\t\tdefault: '50',\n\t},\n];\n\nexport function dimRatioToClass( ratio ) {\n\treturn ratio === 0 || ratio === 50 || ! ratio\n\t\t? null\n\t\t: 'has-background-dim-' + 10 * Math.round( ratio / 10 );\n}\n\nexport function attributesFromMedia( setAttributes ) {\n\treturn ( media ) => {\n\t\tif ( ! media || ! media.url ) {\n\t\t\tsetAttributes( { url: undefined, id: undefined } );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isBlobURL( media.url ) ) {\n\t\t\tmedia.type = getBlobTypeByURL( media.url );\n\t\t}\n\n\t\tlet mediaType;\n\t\t// for media selections originated from a file upload.\n\t\tif ( media.media_type ) {\n\t\t\tif ( media.media_type === IMAGE_BACKGROUND_TYPE ) {\n\t\t\t\tmediaType = IMAGE_BACKGROUND_TYPE;\n\t\t\t} else {\n\t\t\t\t// only images and videos are accepted so if the media_type is not an image we can assume it is a video.\n\t\t\t\t// Videos contain the media type of 'file' in the object returned from the rest api.\n\t\t\t\tmediaType = VIDEO_BACKGROUND_TYPE;\n\t\t\t}\n\t\t} else {\n\t\t\t// for media selections originated from existing files in the media library.\n\t\t\tif (\n\t\t\t\tmedia.type !== IMAGE_BACKGROUND_TYPE &&\n\t\t\t\tmedia.type !== VIDEO_BACKGROUND_TYPE\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmediaType = media.type;\n\t\t}\n\n\t\tsetAttributes( {\n\t\t\turl: media.url,\n\t\t\tid: media.id,\n\t\t\tbackgroundType: mediaType,\n\t\t\t...( mediaType === VIDEO_BACKGROUND_TYPE\n\t\t\t\t? { focalPoint: undefined, hasParallax: undefined }\n\t\t\t\t: {} ),\n\t\t} );\n\t};\n}\n\n/**\n * Checks of the contentPosition is the center (default) position.\n *\n * @param {string} contentPosition The current content position.\n * @return {boolean} Whether the contentPosition is center.\n */\nexport function isContentPositionCenter( contentPosition ) {\n\treturn (\n\t\t! contentPosition ||\n\t\tcontentPosition === 'center center' ||\n\t\tcontentPosition === 'center'\n\t);\n}\n\n/**\n * Retrieves the className for the current contentPosition.\n * The default position (center) will not have a className.\n *\n * @param {string} contentPosition The current content position.\n * @return {string} The className assigned to the contentPosition.\n */\nexport function getPositionClassName( contentPosition ) {\n\t/*\n\t * Only render a className if the contentPosition is not center (the default).\n\t */\n\tif ( isContentPositionCenter( contentPosition ) ) return '';\n\n\treturn POSITION_CLASSNAMES[ contentPosition ];\n}\n"]}