{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["classnames","useState","InnerBlocks","__experimentalUseInnerBlocksProps","useInnerBlocksProps","InspectorControls","BlockControls","useBlockProps","useDispatch","withSelect","withDispatch","PanelBody","ToggleControl","ToolbarGroup","compose","__","useBlockNavigator","justifyLeft","justifyCenter","justifyRight","justifySpaceBetween","NavigationPlaceholder","PlaceholderPreview","Navigation","selectedBlockHasDescendants","attributes","setAttributes","clientId","hasExistingNavItems","isImmediateParentOfSelectedBlock","isSelected","updateInnerBlocks","className","hasSubmenuIndicatorSetting","hasItemJustificationControls","orientation","hasListViewModal","navIcons","left","center","right","isPlaceholderShown","setIsPlaceholderShown","selectBlock","blockProps","itemsJustification","navigatorToolbarButton","navigatorModal","innerBlocksProps","allowedBlocks","renderAppender","DefaultAppender","__experimentalAppenderTagName","__experimentalCaptureToolbars","templateLock","__experimentalLayout","type","alignments","placeholder","blocks","selectNavigationBlock","handleItemsAlignment","align","undefined","POPOVER_PROPS","position","isAlternate","icon","title","isActive","onClick","showSubmenuIcon","value","select","innerBlocks","getBlocks","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","selectedBlockId","length","dispatch","replaceInnerBlocks"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\t__experimentalUseInnerBlocksProps as useInnerBlocksProps,\n\tInspectorControls,\n\tBlockControls,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport { PanelBody, ToggleControl, ToolbarGroup } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport {\n\tjustifyLeft,\n\tjustifyCenter,\n\tjustifyRight,\n\tjustifySpaceBetween,\n} from '@wordpress/icons';\nimport NavigationPlaceholder from './placeholder';\nimport PlaceholderPreview from './placeholder-preview';\n\nfunction Navigation( {\n\tselectedBlockHasDescendants,\n\tattributes,\n\tsetAttributes,\n\tclientId,\n\thasExistingNavItems,\n\tisImmediateParentOfSelectedBlock,\n\tisSelected,\n\tupdateInnerBlocks,\n\tclassName,\n\thasSubmenuIndicatorSetting = true,\n\thasItemJustificationControls = attributes.orientation === 'horizontal',\n\thasListViewModal = true,\n} ) {\n\tconst navIcons = {\n\t\tleft: justifyLeft,\n\t\tcenter: justifyCenter,\n\t\tright: justifyRight,\n\t\t'space-between': justifySpaceBetween,\n\t};\n\n\tconst [ isPlaceholderShown, setIsPlaceholderShown ] = useState(\n\t\t! hasExistingNavItems\n\t);\n\n\tconst { selectBlock } = useDispatch( 'core/block-editor' );\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: classnames( className, {\n\t\t\t[ `items-justified-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t\t'is-vertical': attributes.orientation === 'vertical',\n\t\t} ),\n\t} );\n\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: 'wp-block-navigation__container',\n\t\t},\n\t\t{\n\t\t\tallowedBlocks: [\n\t\t\t\t'core/navigation-link',\n\t\t\t\t'core/search',\n\t\t\t\t'core/social-links',\n\t\t\t],\n\t\t\torientation: attributes.orientation || 'horizontal',\n\t\t\trenderAppender:\n\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\tisSelected\n\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t: false,\n\t\t\t__experimentalAppenderTagName: 'li',\n\t\t\t__experimentalCaptureToolbars: true,\n\t\t\t// Template lock set to false here so that the Nav\n\t\t\t// Block on the experimental menus screen does not\n\t\t\t// inherit templateLock={ 'all' }.\n\t\t\ttemplateLock: false,\n\t\t\t__experimentalLayout: {\n\t\t\t\ttype: 'default',\n\t\t\t\talignments: [],\n\t\t\t},\n\t\t\tplaceholder: <PlaceholderPreview />,\n\t\t}\n\t);\n\n\tif ( isPlaceholderShown ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<NavigationPlaceholder\n\t\t\t\t\tonCreate={ ( blocks, selectNavigationBlock ) => {\n\t\t\t\t\t\tsetIsPlaceholderShown( false );\n\t\t\t\t\t\tupdateInnerBlocks( blocks );\n\t\t\t\t\t\tif ( selectNavigationBlock ) {\n\t\t\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tfunction handleItemsAlignment( align ) {\n\t\treturn () => {\n\t\t\tconst itemsJustification =\n\t\t\t\tattributes.itemsJustification === align ? undefined : align;\n\t\t\tsetAttributes( {\n\t\t\t\titemsJustification,\n\t\t\t} );\n\t\t};\n\t}\n\n\tconst POPOVER_PROPS = {\n\t\tposition: 'bottom right',\n\t\tisAlternate: true,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t{ hasItemJustificationControls && (\n\t\t\t\t\t<ToolbarGroup\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t\t? navIcons[ attributes.itemsJustification ]\n\t\t\t\t\t\t\t\t: navIcons.left\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t\t\t\tlabel={ __( 'Change items justification' ) }\n\t\t\t\t\t\tisCollapsed\n\t\t\t\t\t\tcontrols={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: justifyLeft,\n\t\t\t\t\t\t\t\ttitle: __( 'Justify items left' ),\n\t\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t\t'left' === attributes.itemsJustification,\n\t\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'left' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: justifyCenter,\n\t\t\t\t\t\t\t\ttitle: __( 'Justify items center' ),\n\t\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t\t'center' === attributes.itemsJustification,\n\t\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'center' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: justifyRight,\n\t\t\t\t\t\t\t\ttitle: __( 'Justify items right' ),\n\t\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t\t'right' === attributes.itemsJustification,\n\t\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'right' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: justifySpaceBetween,\n\t\t\t\t\t\t\t\ttitle: __( 'Space between items' ),\n\t\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t\t'space-between' ===\n\t\t\t\t\t\t\t\t\tattributes.itemsJustification,\n\t\t\t\t\t\t\t\tonClick: handleItemsAlignment(\n\t\t\t\t\t\t\t\t\t'space-between'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ hasListViewModal && (\n\t\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\t\t\t\t) }\n\t\t\t</BlockControls>\n\t\t\t{ hasListViewModal && navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t{ hasSubmenuIndicatorSetting && (\n\t\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tshowSubmenuIcon: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Show submenu indicator icons' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t) }\n\t\t\t</InspectorControls>\n\t\t\t<nav { ...blockProps }>\n\t\t\t\t<ul { ...innerBlocksProps } />\n\t\t\t</nav>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( 'core/block-editor' ).getBlocks( clientId );\n\t\tconst {\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetSelectedBlockClientId,\n\t\t} = select( 'core/block-editor' );\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\t\treturn {\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\tselectedBlockHasDescendants,\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateInnerBlocks( blocks ) {\n\t\t\t\tif ( blocks?.length === 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tdispatch( 'core/block-editor' ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n] )( Navigation );\n"]}