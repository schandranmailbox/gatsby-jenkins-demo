{"version":3,"sources":["@wordpress/block-library/src/navigation-link/edit.js"],"names":["classnames","escape","get","head","find","compose","createBlock","useSelect","useDispatch","withDispatch","withSelect","KeyboardShortcuts","PanelBody","Popover","TextControl","TextareaControl","ToolbarButton","ToolbarGroup","rawShortcut","displayShortcut","__","sprintf","BlockControls","InnerBlocks","__experimentalUseInnerBlocksProps","useInnerBlocksProps","InspectorControls","RichText","__experimentalLinkControl","LinkControl","useBlockProps","isURL","prependHTTP","Fragment","useState","useEffect","useRef","createInterpolateElement","placeCaretAtHorizontalEdge","link","linkIcon","ToolbarSubmenuIcon","ItemSubmenuIcon","useIsDraggingWithin","elementRef","isDraggingWithin","setIsDraggingWithin","ownerDocument","current","handleDragStart","event","handleDragEnter","handleDragEnd","contains","target","addEventListener","removeEventListener","getSuggestionsQuery","type","subtype","NavigationLinkEdit","attributes","hasDescendants","isSelected","isImmediateParentOfSelectedBlock","isParentOfSelectedBlock","setAttributes","showSubmenuIcon","insertLinkBlock","textColor","backgroundColor","rgbTextColor","rgbBackgroundColor","selectedBlockHasDescendants","userCanCreatePages","userCanCreatePosts","insertBlocksAfter","mergeBlocks","onReplace","label","opensInNewTab","url","description","rel","title","saveEntityRecord","isLinkOpen","setIsLinkOpen","listItemRef","itemLabelPlaceholder","ref","isDraggingBlocks","select","test","selectLabelText","focus","defaultView","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","userCanCreate","handleCreate","pageTitle","postType","status","page","id","rendered","blockProps","className","style","color","innerBlocksProps","allowedBlocks","renderAppender","DefaultAppender","__experimentalAppenderTagName","primary","descriptionValue","titleValue","relValue","labelValue","searchTerm","format","mark","newTitle","newURL","newOpensInNewTab","encodeURI","normalizedTitle","replace","normalizedURL","getColorObjectByColorSlug","colors","colorSlug","customColor","length","slug","ownProps","getBlockAttributes","getClientIdsOfDescendants","hasSelectedInnerBlock","getBlockParentsByBlockName","getSelectedBlockClientId","getSettings","clientId","rootBlock","navigationBlockAttributes","selectedBlockId","canUser","customTextColor","customBackgroundColor","dispatch","registry","insertBlock","navItems","insertionPoint","blockToInsert"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { escape, get, head, find } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { createBlock } from '@wordpress/blocks';\nimport {\n\tuseSelect,\n\tuseDispatch,\n\twithDispatch,\n\twithSelect,\n} from '@wordpress/data';\nimport {\n\tKeyboardShortcuts,\n\tPanelBody,\n\tPopover,\n\tTextControl,\n\tTextareaControl,\n\tToolbarButton,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport { rawShortcut, displayShortcut } from '@wordpress/keycodes';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tBlockControls,\n\tInnerBlocks,\n\t__experimentalUseInnerBlocksProps as useInnerBlocksProps,\n\tInspectorControls,\n\tRichText,\n\t__experimentalLinkControl as LinkControl,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport { isURL, prependHTTP } from '@wordpress/url';\nimport {\n\tFragment,\n\tuseState,\n\tuseEffect,\n\tuseRef,\n\tcreateInterpolateElement,\n} from '@wordpress/element';\nimport { placeCaretAtHorizontalEdge } from '@wordpress/dom';\nimport { link as linkIcon } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { ToolbarSubmenuIcon, ItemSubmenuIcon } from './icons';\n\n/**\n * A React hook to determine if it's dragging within the target element.\n *\n * @typedef {import('@wordpress/element').RefObject} RefObject\n *\n * @param {RefObject<HTMLElement>} elementRef The target elementRef object.\n *\n * @return {boolean} Is dragging within the target element.\n */\nconst useIsDraggingWithin = ( elementRef ) => {\n\tconst [ isDraggingWithin, setIsDraggingWithin ] = useState( false );\n\n\tuseEffect( () => {\n\t\tconst { ownerDocument } = elementRef.current;\n\n\t\tfunction handleDragStart( event ) {\n\t\t\t// Check the first time when the dragging starts.\n\t\t\thandleDragEnter( event );\n\t\t}\n\n\t\t// Set to false whenever the user cancel the drag event by either releasing the mouse or press Escape.\n\t\tfunction handleDragEnd() {\n\t\t\tsetIsDraggingWithin( false );\n\t\t}\n\n\t\tfunction handleDragEnter( event ) {\n\t\t\t// Check if the current target is inside the item element.\n\t\t\tif ( elementRef.current.contains( event.target ) ) {\n\t\t\t\tsetIsDraggingWithin( true );\n\t\t\t} else {\n\t\t\t\tsetIsDraggingWithin( false );\n\t\t\t}\n\t\t}\n\n\t\t// Bind these events to the document to catch all drag events.\n\t\t// Ideally, we can also use `event.relatedTarget`, but sadly that\n\t\t// doesn't work in Safari.\n\t\townerDocument.addEventListener( 'dragstart', handleDragStart );\n\t\townerDocument.addEventListener( 'dragend', handleDragEnd );\n\t\townerDocument.addEventListener( 'dragenter', handleDragEnter );\n\n\t\treturn () => {\n\t\t\townerDocument.removeEventListener( 'dragstart', handleDragStart );\n\t\t\townerDocument.removeEventListener( 'dragend', handleDragEnd );\n\t\t\townerDocument.removeEventListener( 'dragenter', handleDragEnter );\n\t\t};\n\t}, [] );\n\n\treturn isDraggingWithin;\n};\n\n/**\n * Given the Link block's type attribute, return the query params to give to\n * /wp/v2/search.\n *\n * @param {string} type Link block's type attribute.\n * @return {{ type?: string, subtype?: string }} Search query params.\n */\nfunction getSuggestionsQuery( type ) {\n\tswitch ( type ) {\n\t\tcase 'post':\n\t\tcase 'page':\n\t\t\treturn { type: 'post', subtype: type };\n\t\tcase 'category':\n\t\t\treturn { type: 'term', subtype: 'category' };\n\t\tcase 'tag':\n\t\t\treturn { type: 'term', subtype: 'post_tag' };\n\t\tdefault:\n\t\t\treturn {};\n\t}\n}\n\nfunction NavigationLinkEdit( {\n\tattributes,\n\thasDescendants,\n\tisSelected,\n\tisImmediateParentOfSelectedBlock,\n\tisParentOfSelectedBlock,\n\tsetAttributes,\n\tshowSubmenuIcon,\n\tinsertLinkBlock,\n\ttextColor,\n\tbackgroundColor,\n\trgbTextColor,\n\trgbBackgroundColor,\n\tselectedBlockHasDescendants,\n\tuserCanCreatePages = false,\n\tuserCanCreatePosts = false,\n\tinsertBlocksAfter,\n\tmergeBlocks,\n\tonReplace,\n} ) {\n\tconst {\n\t\tlabel,\n\t\ttype,\n\t\topensInNewTab,\n\t\turl,\n\t\tdescription,\n\t\trel,\n\t\ttitle,\n\t} = attributes;\n\tconst link = {\n\t\turl,\n\t\topensInNewTab,\n\t};\n\tconst { saveEntityRecord } = useDispatch( 'core' );\n\tconst [ isLinkOpen, setIsLinkOpen ] = useState( false );\n\tconst listItemRef = useRef( null );\n\tconst isDraggingWithin = useIsDraggingWithin( listItemRef );\n\tconst itemLabelPlaceholder = __( 'Add link…' );\n\tconst ref = useRef();\n\n\tconst isDraggingBlocks = useSelect(\n\t\t( select ) => select( 'core/block-editor' ).isDraggingBlocks(),\n\t\t[]\n\t);\n\n\t// Show the LinkControl on mount if the URL is empty\n\t// ( When adding a new menu item)\n\t// This can't be done in the useState call because it conflicts\n\t// with the autofocus behavior of the BlockListBlock component.\n\tuseEffect( () => {\n\t\tif ( ! url ) {\n\t\t\tsetIsLinkOpen( true );\n\t\t}\n\t}, [] );\n\n\t/**\n\t * The hook shouldn't be necessary but due to a focus loss happening\n\t * when selecting a suggestion in the link popover, we force close on block unselection.\n\t */\n\tuseEffect( () => {\n\t\tif ( ! isSelected ) {\n\t\t\tsetIsLinkOpen( false );\n\t\t}\n\t}, [ isSelected ] );\n\n\t// If the LinkControl popover is open and the URL has changed, close the LinkControl and focus the label text.\n\tuseEffect( () => {\n\t\tif ( isLinkOpen && url ) {\n\t\t\t// Does this look like a URL and have something TLD-ish?\n\t\t\tif (\n\t\t\t\tisURL( prependHTTP( label ) ) &&\n\t\t\t\t/^.+\\.[a-z]+/.test( label )\n\t\t\t) {\n\t\t\t\t// Focus and select the label text.\n\t\t\t\tselectLabelText();\n\t\t\t} else {\n\t\t\t\t// Focus it (but do not select).\n\t\t\t\tplaceCaretAtHorizontalEdge( ref.current, true );\n\t\t\t}\n\t\t}\n\t}, [ url ] );\n\n\t/**\n\t * Focus the Link label text and select it.\n\t */\n\tfunction selectLabelText() {\n\t\tref.current.focus();\n\t\tconst { ownerDocument } = ref.current;\n\t\tconst { defaultView } = ownerDocument;\n\t\tconst selection = defaultView.getSelection();\n\t\tconst range = ownerDocument.createRange();\n\t\t// Get the range of the current ref contents so we can add this range to the selection.\n\t\trange.selectNodeContents( ref.current );\n\t\tselection.removeAllRanges();\n\t\tselection.addRange( range );\n\t}\n\n\tlet userCanCreate = false;\n\tif ( ! type || type === 'page' ) {\n\t\tuserCanCreate = userCanCreatePages;\n\t} else if ( type === 'post' ) {\n\t\tuserCanCreate = userCanCreatePosts;\n\t}\n\n\tasync function handleCreate( pageTitle ) {\n\t\tconst postType = type || 'page';\n\n\t\tconst page = await saveEntityRecord( 'postType', postType, {\n\t\t\ttitle: pageTitle,\n\t\t\tstatus: 'draft',\n\t\t} );\n\n\t\treturn {\n\t\t\tid: page.id,\n\t\t\tpostType,\n\t\t\ttitle: page.title.rendered,\n\t\t\turl: page.link,\n\t\t};\n\t}\n\n\tconst blockProps = useBlockProps( {\n\t\tref: listItemRef,\n\t\tclassName: classnames( {\n\t\t\t'is-editing':\n\t\t\t\t( isSelected || isParentOfSelectedBlock ) &&\n\t\t\t\t// Don't show the element as editing while dragging.\n\t\t\t\t! isDraggingBlocks,\n\t\t\t// Don't select the element while dragging.\n\t\t\t'is-selected': isSelected && ! isDraggingBlocks,\n\t\t\t'is-dragging-within': isDraggingWithin,\n\t\t\t'has-link': !! url,\n\t\t\t'has-child': hasDescendants,\n\t\t\t'has-text-color': rgbTextColor,\n\t\t\t[ `has-${ textColor }-color` ]: !! textColor,\n\t\t\t'has-background': rgbBackgroundColor,\n\t\t\t[ `has-${ backgroundColor }-background-color` ]: !! backgroundColor,\n\t\t} ),\n\t\tstyle: {\n\t\t\tcolor: rgbTextColor,\n\t\t\tbackgroundColor: rgbBackgroundColor,\n\t\t},\n\t} );\n\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tclassName: classnames( 'wp-block-navigation__container', {\n\t\t\t\t'is-parent-of-selected-block':\n\t\t\t\t\tisParentOfSelectedBlock &&\n\t\t\t\t\t// Don't select as parent of selected block while dragging.\n\t\t\t\t\t! isDraggingBlocks,\n\t\t\t} ),\n\t\t},\n\t\t{\n\t\t\tallowedBlocks: [ 'core/navigation-link' ],\n\t\t\trenderAppender:\n\t\t\t\t( isSelected && hasDescendants ) ||\n\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\t// Show the appender while dragging to allow inserting element between item and the appender.\n\t\t\t\t( isDraggingBlocks && hasDescendants )\n\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t: false,\n\t\t\t__experimentalAppenderTagName: 'li',\n\t\t}\n\t);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t[ rawShortcut.primary( 'k' ) ]: () =>\n\t\t\t\t\t\t\t\tsetIsLinkOpen( true ),\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tname=\"link\"\n\t\t\t\t\t\ticon={ linkIcon }\n\t\t\t\t\t\ttitle={ __( 'Link' ) }\n\t\t\t\t\t\tshortcut={ displayShortcut.primary( 'k' ) }\n\t\t\t\t\t\tonClick={ () => setIsLinkOpen( true ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tname=\"submenu\"\n\t\t\t\t\t\ticon={ <ToolbarSubmenuIcon /> }\n\t\t\t\t\t\ttitle={ __( 'Add submenu' ) }\n\t\t\t\t\t\tonClick={ insertLinkBlock }\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Link settings' ) }>\n\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\tvalue={ description || '' }\n\t\t\t\t\t\tonChange={ ( descriptionValue ) => {\n\t\t\t\t\t\t\tsetAttributes( { description: descriptionValue } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Description' ) }\n\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t'The description will be displayed in the menu if the current theme supports it.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tvalue={ title || '' }\n\t\t\t\t\t\tonChange={ ( titleValue ) => {\n\t\t\t\t\t\t\tsetAttributes( { title: titleValue } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Link title' ) }\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tvalue={ rel || '' }\n\t\t\t\t\t\tonChange={ ( relValue ) => {\n\t\t\t\t\t\t\tsetAttributes( { rel: relValue } );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tlabel={ __( 'Link rel' ) }\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<li { ...blockProps }>\n\t\t\t\t<div className=\"wp-block-navigation-link__content\">\n\t\t\t\t\t<RichText\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tidentifier=\"label\"\n\t\t\t\t\t\tclassName=\"wp-block-navigation-link__label\"\n\t\t\t\t\t\tvalue={ label }\n\t\t\t\t\t\tonChange={ ( labelValue ) =>\n\t\t\t\t\t\t\tsetAttributes( { label: labelValue } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonMerge={ mergeBlocks }\n\t\t\t\t\t\tonReplace={ onReplace }\n\t\t\t\t\t\t__unstableOnSplitAtEnd={ () =>\n\t\t\t\t\t\t\tinsertBlocksAfter(\n\t\t\t\t\t\t\t\tcreateBlock( 'core/navigation-link' )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-label={ __( 'Navigation link text' ) }\n\t\t\t\t\t\tplaceholder={ itemLabelPlaceholder }\n\t\t\t\t\t\tkeepPlaceholderOnFocus\n\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\tallowedFormats={ [\n\t\t\t\t\t\t\t'core/bold',\n\t\t\t\t\t\t\t'core/italic',\n\t\t\t\t\t\t\t'core/image',\n\t\t\t\t\t\t\t'core/strikethrough',\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t\t{ isLinkOpen && (\n\t\t\t\t\t\t<Popover\n\t\t\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t\t\t\tonClose={ () => setIsLinkOpen( false ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LinkControl\n\t\t\t\t\t\t\t\tclassName=\"wp-block-navigation-link__inline-link-input\"\n\t\t\t\t\t\t\t\tvalue={ link }\n\t\t\t\t\t\t\t\tshowInitialSuggestions={ true }\n\t\t\t\t\t\t\t\twithCreateSuggestion={ userCanCreate }\n\t\t\t\t\t\t\t\tcreateSuggestion={ handleCreate }\n\t\t\t\t\t\t\t\tcreateSuggestionButtonText={ ( searchTerm ) => {\n\t\t\t\t\t\t\t\t\tlet format;\n\t\t\t\t\t\t\t\t\tif ( type === 'post' ) {\n\t\t\t\t\t\t\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t\t\t\t\t\t\tformat = __(\n\t\t\t\t\t\t\t\t\t\t\t'Create draft post: <mark>%s</mark>'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t/* translators: %s: search term. */\n\t\t\t\t\t\t\t\t\t\tformat = __(\n\t\t\t\t\t\t\t\t\t\t\t'Create draft page: <mark>%s</mark>'\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn createInterpolateElement(\n\t\t\t\t\t\t\t\t\t\tsprintf( format, searchTerm ),\n\t\t\t\t\t\t\t\t\t\t{ mark: <mark /> }\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tnoDirectEntry={ !! type }\n\t\t\t\t\t\t\t\tnoURLSuggestion={ !! type }\n\t\t\t\t\t\t\t\tsuggestionsQuery={ getSuggestionsQuery( type ) }\n\t\t\t\t\t\t\t\tonChange={ ( {\n\t\t\t\t\t\t\t\t\ttitle: newTitle = '',\n\t\t\t\t\t\t\t\t\turl: newURL = '',\n\t\t\t\t\t\t\t\t\topensInNewTab: newOpensInNewTab,\n\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t} = {} ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\turl: encodeURI( newURL ),\n\t\t\t\t\t\t\t\t\t\tlabel: ( () => {\n\t\t\t\t\t\t\t\t\t\t\tconst normalizedTitle = newTitle.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t/http(s?):\\/\\//gi,\n\t\t\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tconst normalizedURL = newURL.replace(\n\t\t\t\t\t\t\t\t\t\t\t\t/http(s?):\\/\\//gi,\n\t\t\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\tnewTitle !== '' &&\n\t\t\t\t\t\t\t\t\t\t\t\tnormalizedTitle !==\n\t\t\t\t\t\t\t\t\t\t\t\t\tnormalizedURL &&\n\t\t\t\t\t\t\t\t\t\t\t\tlabel !== newTitle\n\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn escape( newTitle );\n\t\t\t\t\t\t\t\t\t\t\t} else if ( label ) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn label;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t// If there's no label, add the URL.\n\t\t\t\t\t\t\t\t\t\t\treturn escape( normalizedURL );\n\t\t\t\t\t\t\t\t\t\t} )(),\n\t\t\t\t\t\t\t\t\t\topensInNewTab: newOpensInNewTab,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Popover>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t{ showSubmenuIcon && (\n\t\t\t\t\t<span className=\"wp-block-navigation-link__submenu-icon\">\n\t\t\t\t\t\t<ItemSubmenuIcon />\n\t\t\t\t\t</span>\n\t\t\t\t) }\n\t\t\t\t<ul { ...innerBlocksProps } />\n\t\t\t</li>\n\t\t</Fragment>\n\t);\n}\n\n/**\n * Returns the color object matching the slug, or undefined.\n *\n * @param {Array}  colors      The editor settings colors array.\n * @param {string} colorSlug   A string containing the color slug.\n * @param {string} customColor A string containing the custom color value.\n *\n * @return {Object} Color object included in the editor settings colors, or Undefined.\n */\nconst getColorObjectByColorSlug = ( colors, colorSlug, customColor ) => {\n\tif ( customColor ) {\n\t\treturn customColor;\n\t}\n\n\tif ( ! colors || ! colors.length ) {\n\t\treturn;\n\t}\n\n\treturn get( find( colors, { slug: colorSlug } ), 'color' );\n};\n\nexport default compose( [\n\twithSelect( ( select, ownProps ) => {\n\t\tconst {\n\t\t\tgetBlockAttributes,\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetBlockParentsByBlockName,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetSettings,\n\t\t} = select( 'core/block-editor' );\n\t\tconst { clientId } = ownProps;\n\t\tconst rootBlock = head(\n\t\t\tgetBlockParentsByBlockName( clientId, 'core/navigation' )\n\t\t);\n\t\tconst navigationBlockAttributes = getBlockAttributes( rootBlock );\n\t\tconst colors = get( getSettings(), 'colors', [] );\n\t\tconst hasDescendants = !! getClientIdsOfDescendants( [ clientId ] )\n\t\t\t.length;\n\t\tconst showSubmenuIcon =\n\t\t\t!! navigationBlockAttributes.showSubmenuIcon && hasDescendants;\n\t\tconst isParentOfSelectedBlock = hasSelectedInnerBlock( clientId, true );\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\n\t\treturn {\n\t\t\tisParentOfSelectedBlock,\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\thasDescendants,\n\t\t\tselectedBlockHasDescendants,\n\t\t\tshowSubmenuIcon,\n\t\t\ttextColor: navigationBlockAttributes.textColor,\n\t\t\tbackgroundColor: navigationBlockAttributes.backgroundColor,\n\t\t\tuserCanCreatePages: select( 'core' ).canUser( 'create', 'pages' ),\n\t\t\tuserCanCreatePosts: select( 'core' ).canUser( 'create', 'posts' ),\n\t\t\trgbTextColor: getColorObjectByColorSlug(\n\t\t\t\tcolors,\n\t\t\t\tnavigationBlockAttributes.textColor,\n\t\t\t\tnavigationBlockAttributes.customTextColor\n\t\t\t),\n\t\t\trgbBackgroundColor: getColorObjectByColorSlug(\n\t\t\t\tcolors,\n\t\t\t\tnavigationBlockAttributes.backgroundColor,\n\t\t\t\tnavigationBlockAttributes.customBackgroundColor\n\t\t\t),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps, registry ) => {\n\t\treturn {\n\t\t\tinsertLinkBlock() {\n\t\t\t\tconst { clientId } = ownProps;\n\n\t\t\t\tconst { insertBlock } = dispatch( 'core/block-editor' );\n\n\t\t\t\tconst { getClientIdsOfDescendants } = registry.select(\n\t\t\t\t\t'core/block-editor'\n\t\t\t\t);\n\t\t\t\tconst navItems = getClientIdsOfDescendants( [ clientId ] );\n\t\t\t\tconst insertionPoint = navItems.length ? navItems.length : 0;\n\n\t\t\t\tconst blockToInsert = createBlock( 'core/navigation-link' );\n\n\t\t\t\tinsertBlock( blockToInsert, insertionPoint, clientId );\n\t\t\t},\n\t\t};\n\t} ),\n] )( NavigationLinkEdit );\n"]}