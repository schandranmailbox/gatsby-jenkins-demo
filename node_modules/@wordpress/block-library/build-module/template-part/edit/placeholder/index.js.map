{"version":3,"sources":["@wordpress/block-library/src/template-part/edit/placeholder/index.js"],"names":["__","useCallback","useEffect","useDispatch","Placeholder","Dropdown","Button","Spinner","blockDefault","serialize","TemplatePartSelection","TemplatePartPlaceholder","setAttributes","innerBlocks","saveEntityRecord","onCreate","title","slug","content","templatePart","theme","length","isOpen","onToggle","onClose"],"mappings":";;;;AAAA;AACA;AACA;AACA,SAASA,EAAT,QAAmB,iBAAnB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,oBAAvC;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,SAASC,WAAT,EAAsBC,QAAtB,EAAgCC,MAAhC,EAAwCC,OAAxC,QAAuD,uBAAvD;AACA,SAASC,YAAT,QAA6B,kBAA7B;AACA,SAASC,SAAT,QAA0B,mBAA1B;AAEA;AACA;AACA;;AACA,OAAOC,qBAAP,MAAkC,cAAlC;AAEA,eAAe,SAASC,uBAAT,OAGX;AAAA,MAFHC,aAEG,QAFHA,aAEG;AAAA,MADHC,WACG,QADHA,WACG;;AAAA,qBAC0BV,WAAW,CAAE,MAAF,CADrC;AAAA,MACKW,gBADL,gBACKA,gBADL;;AAEH,MAAMC,QAAQ,GAAGd,WAAW,wEAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBe,YAAAA,KADuB,GACfhB,EAAE,CAAE,wBAAF,CADa;AAAA;AAAA,mBAEFc,gBAAgB,CAC1C,UAD0C,EAE1C,kBAF0C,EAG1C;AACCE,cAAAA,KAAK,EAALA,KADD;AAECC,cAAAA,IAAI,EAAE,eAFP;AAGCC,cAAAA,OAAO,EAAET,SAAS,CAAEI,WAAF;AAHnB,aAH0C,CAFd;;AAAA;AAEvBM,YAAAA,YAFuB;AAW7BP,YAAAA,aAAa,CAAE;AACdK,cAAAA,IAAI,EAAEE,YAAY,CAACF,IADL;AAEdG,cAAAA,KAAK,EAAED,YAAY,CAACC;AAFN,aAAF,CAAb;;AAX6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAF,IAezB,CAAER,aAAF,CAfyB,CAA5B,CAFG,CAmBH;AACA;;AACAV,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAKW,WAAW,CAACQ,MAAjB,EAA0B;AACzBN,MAAAA,QAAQ;AACR;AACD,GAJQ,EAIN,EAJM,CAAT;;AAKA,MAAKF,WAAW,CAACQ,MAAjB,EAA0B;AACzB,WACC,cAAC,WAAD,QACC,cAAC,OAAD,OADD,CADD;AAKA;;AAED,SACC,cAAC,WAAD;AACC,IAAA,IAAI,EAAGb,YADR;AAEC,IAAA,KAAK,EAAGR,EAAE,CAAE,eAAF,CAFX;AAGC,IAAA,YAAY,EAAGA,EAAE,CAChB,mEADgB;AAHlB,KAOC,cAAC,QAAD;AACC,IAAA,gBAAgB,EAAC,8DADlB;AAEC,IAAA,QAAQ,EAAC,mBAFV;AAGC,IAAA,YAAY,EAAG;AAAA,UAAIsB,MAAJ,SAAIA,MAAJ;AAAA,UAAYC,QAAZ,SAAYA,QAAZ;AAAA,aACd,8BACC,cAAC,MAAD;AACC,QAAA,SAAS,MADV;AAEC,QAAA,OAAO,EAAGA,QAFX;AAGC,yBAAgBD;AAHjB,SAKGtB,EAAE,CAAE,iBAAF,CALL,CADD,EAQC,cAAC,MAAD;AAAQ,QAAA,UAAU,MAAlB;AAAmB,QAAA,OAAO,EAAGe;AAA7B,SACGf,EAAE,CAAE,mBAAF,CADL,CARD,CADc;AAAA,KAHhB;AAiBC,IAAA,aAAa,EAAG;AAAA,UAAIwB,OAAJ,SAAIA,OAAJ;AAAA,aACf,cAAC,qBAAD;AACC,QAAA,aAAa,EAAGZ,aADjB;AAEC,QAAA,OAAO,EAAGY;AAFX,QADe;AAAA;AAjBjB,IAPD,CADD;AAkCA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useCallback, useEffect } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { Placeholder, Dropdown, Button, Spinner } from '@wordpress/components';\nimport { blockDefault } from '@wordpress/icons';\nimport { serialize } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport TemplatePartSelection from '../selection';\n\nexport default function TemplatePartPlaceholder( {\n\tsetAttributes,\n\tinnerBlocks,\n} ) {\n\tconst { saveEntityRecord } = useDispatch( 'core' );\n\tconst onCreate = useCallback( async () => {\n\t\tconst title = __( 'Untitled Template Part' );\n\t\tconst templatePart = await saveEntityRecord(\n\t\t\t'postType',\n\t\t\t'wp_template_part',\n\t\t\t{\n\t\t\t\ttitle,\n\t\t\t\tslug: 'template-part',\n\t\t\t\tcontent: serialize( innerBlocks ),\n\t\t\t}\n\t\t);\n\t\tsetAttributes( {\n\t\t\tslug: templatePart.slug,\n\t\t\ttheme: templatePart.theme,\n\t\t} );\n\t}, [ setAttributes ] );\n\n\t// If there are inner blocks present, the content for creation is clear.\n\t// Therefore immediately create the template part with the given inner blocks as its content.\n\tuseEffect( () => {\n\t\tif ( innerBlocks.length ) {\n\t\t\tonCreate();\n\t\t}\n\t}, [] );\n\tif ( innerBlocks.length ) {\n\t\treturn (\n\t\t\t<Placeholder>\n\t\t\t\t<Spinner />\n\t\t\t</Placeholder>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Placeholder\n\t\t\ticon={ blockDefault }\n\t\t\tlabel={ __( 'Template Part' ) }\n\t\t\tinstructions={ __(\n\t\t\t\t'Create a new template part or pick an existing one from the list.'\n\t\t\t) }\n\t\t>\n\t\t\t<Dropdown\n\t\t\t\tcontentClassName=\"wp-block-template-part__placeholder-preview-dropdown-content\"\n\t\t\t\tposition=\"bottom right left\"\n\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Choose existing' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button isTertiary onClick={ onCreate }>\n\t\t\t\t\t\t\t{ __( 'New template part' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t\t<TemplatePartSelection\n\t\t\t\t\t\tsetAttributes={ setAttributes }\n\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</Placeholder>\n\t);\n}\n"]}