{"version":3,"sources":["@wordpress/block-library/src/query/edit/query-inspector-controls.js"],"names":["debounce","PanelBody","QueryControls","TextControl","FormTokenField","SelectControl","RangeControl","ToggleControl","Notice","__","InspectorControls","useSelect","addQueryArgs","useEffect","useState","useCallback","useMemo","createInterpolateElement","getTermsInfo","MAX_FETCHED_TERMS","stickyOptions","label","value","CreateNewPostLink","type","newPostUrl","post_type","a","QueryInspectorControls","attributes","query","layout","setQuery","setLayout","order","orderBy","selectedAuthorId","author","postType","sticky","inherit","showCategories","setShowCategories","showTags","setShowTags","showSticky","setShowSticky","select","getEntityRecords","getPostTypes","termsQuery","per_page","_categories","_tags","excludedPostTypes","filteredPostTypes","filter","viewable","slug","includes","categories","tags","authorList","postTypes","postTypesTaxonomiesMap","length","reduce","accumulator","taxonomies","postTypeTaxonomies","postTypesSelectOptions","map","labels","singular_name","onPostTypeChange","newValue","updateQuery","categoryIds","tagIds","onTermsChange","terms","queryProperty","newTermValues","termIds","termValue","termId","id","mapByName","push","onCategoriesChange","onTagsChange","search","querySearch","setQuerySearch","onChangeDebounced","cancel","columns","Math","max","categoryId","mapById","name","names","tagId","undefined"],"mappings":";;;;;AAAA;AACA;AACA;AACA,SAASA,QAAT,QAAyB,QAAzB;AAEA;AACA;AACA;;AAEA,SACCC,SADD,EAECC,aAFD,EAGCC,WAHD,EAICC,cAJD,EAKCC,aALD,EAMCC,YAND,EAOCC,aAPD,EAQCC,MARD,QASO,uBATP;AAUA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,iBAAT,QAAkC,yBAAlC;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SACCC,SADD,EAECC,QAFD,EAGCC,WAHD,EAICC,OAJD,EAKCC,wBALD,QAMO,oBANP;AAQA;AACA;AACA;;AACA,SAASC,YAAT,QAA6B,UAA7B;AACA,SAASC,iBAAT,QAAkC,cAAlC;AAEA,IAAMC,aAAa,GAAG,CACrB;AAAEC,EAAAA,KAAK,EAAEZ,EAAE,CAAE,SAAF,CAAX;AAA0Ba,EAAAA,KAAK,EAAE;AAAjC,CADqB,EAErB;AAAED,EAAAA,KAAK,EAAEZ,EAAE,CAAE,SAAF,CAAX;AAA0Ba,EAAAA,KAAK,EAAE;AAAjC,CAFqB,EAGrB;AAAED,EAAAA,KAAK,EAAEZ,EAAE,CAAE,MAAF,CAAX;AAAuBa,EAAAA,KAAK,EAAE;AAA9B,CAHqB,CAAtB;;AAMA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,OAAgB;AAAA,MAAZC,IAAY,QAAZA,IAAY;AACzC,MAAMC,UAAU,GAAGb,YAAY,CAAE,cAAF,EAAkB;AAChDc,IAAAA,SAAS,EAAEF;AADqC,GAAlB,CAA/B;AAGA,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACGP,wBAAwB,CACzBR,EAAE,CAAE,yCAAF,CADuB,EAEzB;AACA;AAAEkB,IAAAA,CAAC,EAAE;AAAG,MAAA,IAAI,EAAGF;AAAV;AAAL,GAHyB,CAD3B,CADD;AASA,CAbD;;AAeA,eAAe,SAASG,sBAAT,QAIX;AAAA;;AAAA,+BAHHC,UAGG;AAAA,MAHWC,KAGX,oBAHWA,KAGX;AAAA,MAHkBC,MAGlB,oBAHkBA,MAGlB;AAAA,MAFHC,QAEG,SAFHA,QAEG;AAAA,MADHC,SACG,SADHA,SACG;AAAA,MAEFC,KAFE,GAQCJ,KARD,CAEFI,KAFE;AAAA,MAGFC,OAHE,GAQCL,KARD,CAGFK,OAHE;AAAA,MAIMC,gBAJN,GAQCN,KARD,CAIFO,MAJE;AAAA,MAKFC,QALE,GAQCR,KARD,CAKFQ,QALE;AAAA,MAMFC,MANE,GAQCT,KARD,CAMFS,MANE;AAAA,MAOFC,OAPE,GAQCV,KARD,CAOFU,OAPE;;AAAA,kBAS2C1B,QAAQ,CAAE,IAAF,CATnD;AAAA;AAAA,MASK2B,cATL;AAAA,MASqBC,iBATrB;;AAAA,mBAU+B5B,QAAQ,CAAE,IAAF,CAVvC;AAAA;AAAA,MAUK6B,QAVL;AAAA,MAUeC,WAVf;;AAAA,mBAWmC9B,QAAQ,CAAEwB,QAAQ,KAAK,MAAf,CAX3C;AAAA;AAAA,MAWKO,UAXL;AAAA,MAWiBC,aAXjB;;AAAA,mBAYiDnC,SAAS,CAC5D,UAAEoC,MAAF,EAAc;AAAA;;AAAA,kBAC8BA,MAAM,CAAE,MAAF,CADpC;AAAA,QACLC,gBADK,WACLA,gBADK;AAAA,QACaC,YADb,WACaA,YADb;;AAEb,QAAMC,UAAU,GAAG;AAAEC,MAAAA,QAAQ,EAAEhC;AAAZ,KAAnB;;AACA,QAAMiC,WAAW,GAAGJ,gBAAgB,CACnC,UADmC,EAEnC,UAFmC,EAGnCE,UAHmC,CAApC;;AAKA,QAAMG,KAAK,GAAGL,gBAAgB,CAC7B,UAD6B,EAE7B,UAF6B,EAG7BE,UAH6B,CAA9B;;AAKA,QAAMI,iBAAiB,GAAG,CAAE,YAAF,CAA1B;AACA,QAAMC,iBAAiB,oBAAGN,YAAY,CAAE;AAAEE,MAAAA,QAAQ,EAAE,CAAC;AAAb,KAAF,CAAf,kDAAG,cAAkCK,MAAlC,CACzB;AAAA,UAAIC,QAAJ,SAAIA,QAAJ;AAAA,UAAcC,IAAd,SAAcA,IAAd;AAAA,aACCD,QAAQ,IAAI,CAAEH,iBAAiB,CAACK,QAAlB,CAA4BD,IAA5B,CADf;AAAA,KADyB,CAA1B;AAIA,WAAO;AACNE,MAAAA,UAAU,EAAE1C,YAAY,CAAEkC,WAAF,CADlB;AAENS,MAAAA,IAAI,EAAE3C,YAAY,CAAEmC,KAAF,CAFZ;AAGNS,MAAAA,UAAU,EAAEd,gBAAgB,CAAE,MAAF,EAAU,MAAV,EAAkB;AAC7CG,QAAAA,QAAQ,EAAE,CAAC;AADkC,OAAlB,CAHtB;AAMNY,MAAAA,SAAS,EAAER;AANL,KAAP;AAQA,GA3B2D,EA4B5D,EA5B4D,CAZ1D;AAAA,MAYKO,UAZL,cAYKA,UAZL;AAAA,MAYiBF,UAZjB,cAYiBA,UAZjB;AAAA,MAY6BC,IAZ7B,cAY6BA,IAZ7B;AAAA,MAYmCE,SAZnC,cAYmCA,SAZnC;;AA0CH,MAAMC,sBAAsB,GAAGhD,OAAO,CAAE,YAAM;AAC7C,QAAK,EAAE+C,SAAF,aAAEA,SAAF,eAAEA,SAAS,CAAEE,MAAb,CAAL,EAA2B;AAC3B,WAAOF,SAAS,CAACG,MAAV,CAAkB,UAAEC,WAAF,EAAe3C,IAAf,EAAyB;AACjD2C,MAAAA,WAAW,CAAE3C,IAAI,CAACkC,IAAP,CAAX,GAA2BlC,IAAI,CAAC4C,UAAhC;AACA,aAAOD,WAAP;AACA,KAHM,EAGJ,EAHI,CAAP;AAIA,GANqC,EAMnC,CAAEJ,SAAF,CANmC,CAAtC;AAOAlD,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAK,CAAEmD,sBAAP,EAAgC;AAChC,QAAMK,kBAAkB,GAAGL,sBAAsB,CAAE1B,QAAF,CAAjD;AACAI,IAAAA,iBAAiB,CAAE2B,kBAAkB,CAACV,QAAnB,CAA6B,UAA7B,CAAF,CAAjB;AACAf,IAAAA,WAAW,CAAEyB,kBAAkB,CAACV,QAAnB,CAA6B,UAA7B,CAAF,CAAX;AACA,GALQ,EAKN,CAAErB,QAAF,EAAY0B,sBAAZ,CALM,CAAT;AAMAnD,EAAAA,SAAS,CAAE,YAAM;AAChBiC,IAAAA,aAAa,CAAER,QAAQ,KAAK,MAAf,CAAb;AACA,GAFQ,EAEN,CAAEA,QAAF,CAFM,CAAT;AAGA,MAAMgC,sBAAsB,GAAGtD,OAAO,CACrC;AAAA,WACC,CAAE+C,SAAS,IAAI,EAAf,EAAoBQ,GAApB,CAAyB;AAAA,UAAIC,MAAJ,SAAIA,MAAJ;AAAA,UAAYd,IAAZ,SAAYA,IAAZ;AAAA,aAA0B;AAClDrC,QAAAA,KAAK,EAAEmD,MAAM,CAACC,aADoC;AAElDnD,QAAAA,KAAK,EAAEoC;AAF2C,OAA1B;AAAA,KAAzB,CADD;AAAA,GADqC,EAMrC,CAAEK,SAAF,CANqC,CAAtC;;AAQA,MAAMW,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAEC,QAAF,EAAgB;AACxC,QAAMC,WAAW,GAAG;AAAEtC,MAAAA,QAAQ,EAAEqC;AAAZ,KAApB;;AACA,QAAK,CAAEX,sBAAsB,CAAEW,QAAF,CAAtB,CAAmChB,QAAnC,CAA6C,UAA7C,CAAP,EAAmE;AAClEiB,MAAAA,WAAW,CAACC,WAAZ,GAA0B,EAA1B;AACA;;AACD,QAAK,CAAEb,sBAAsB,CAAEW,QAAF,CAAtB,CAAmChB,QAAnC,CAA6C,UAA7C,CAAP,EAAmE;AAClEiB,MAAAA,WAAW,CAACE,MAAZ,GAAqB,EAArB;AACA;;AACD,QAAKH,QAAQ,KAAK,MAAlB,EAA2B;AAC1BC,MAAAA,WAAW,CAACrC,MAAZ,GAAqB,EAArB;AACA;;AACDP,IAAAA,QAAQ,CAAE4C,WAAF,CAAR;AACA,GAZD,CAlEG,CA+EH;;;AACA,MAAMG,aAAa,GAAG,SAAhBA,aAAgB,CAAEC,KAAF,EAASC,aAAT;AAAA,WAA4B,UAAEC,aAAF,EAAqB;AACtE,UAAMC,OAAO,GAAGD,aAAa,CAAChB,MAAd,CAAsB,UAAEC,WAAF,EAAeiB,SAAf,EAA8B;AAAA;;AACnE,YAAMC,MAAM,GAAG,CAAAD,SAAS,SAAT,IAAAA,SAAS,WAAT,YAAAA,SAAS,CAAEE,EAAX,+BAAiBN,KAAK,CAACO,SAAN,CAAiBH,SAAjB,CAAjB,0DAAiB,sBAA8BE,EAA/C,CAAf;AACA,YAAKD,MAAL,EAAclB,WAAW,CAACqB,IAAZ,CAAkBH,MAAlB;AACd,eAAOlB,WAAP;AACA,OAJe,EAIb,EAJa,CAAhB;AAKAnC,MAAAA,QAAQ,qBAAMiD,aAAN,EAAuBE,OAAvB,EAAR;AACA,KAPqB;AAAA,GAAtB;;AAQA,MAAMM,kBAAkB,GAAGV,aAAa,CAAEnB,UAAF,EAAc,aAAd,CAAxC;AACA,MAAM8B,YAAY,GAAGX,aAAa,CAAElB,IAAF,EAAQ,QAAR,CAAlC;;AAzFG,mBA2FqC/C,QAAQ,CAAEgB,KAAK,CAAC6D,MAAR,CA3F7C;AAAA;AAAA,MA2FKC,WA3FL;AAAA,MA2FkBC,cA3FlB;;AA4FH,MAAMC,iBAAiB,GAAG/E,WAAW,CACpCf,QAAQ,CAAE,YAAM;AACf,QAAK8B,KAAK,CAAC6D,MAAN,KAAiBC,WAAtB,EAAoC;AACnC5D,MAAAA,QAAQ,CAAE;AAAE2D,QAAAA,MAAM,EAAEC;AAAV,OAAF,CAAR;AACA;AACD,GAJO,EAIL,GAJK,CAD4B,EAMpC,CAAEA,WAAF,EAAe9D,KAAK,CAAC6D,MAArB,CANoC,CAArC;AASA9E,EAAAA,SAAS,CAAE,YAAM;AAChBiF,IAAAA,iBAAiB;AACjB,WAAOA,iBAAiB,CAACC,MAAzB;AACA,GAHQ,EAGN,CAAEH,WAAF,EAAeE,iBAAf,CAHM,CAAT;AAKA,SACC,cAAC,iBAAD,QACC,cAAC,iBAAD;AAAmB,IAAA,IAAI,EAAGxD;AAA1B,IADD,EAEC,cAAC,SAAD;AAAW,IAAA,KAAK,EAAG7B,EAAE,CAAE,UAAF;AAArB,KACC,cAAC,aAAD;AACC,IAAA,KAAK,EAAGA,EAAE,CAAE,wBAAF,CADX;AAEC,IAAA,IAAI,EAAGA,EAAE,CACR,sHADQ,CAFV;AAKC,IAAA,OAAO,EAAG,CAAC,CAAE+B,OALd;AAMC,IAAA,QAAQ,EAAG,kBAAElB,KAAF;AAAA,aAAaU,QAAQ,CAAE;AAAEQ,QAAAA,OAAO,EAAE,CAAC,CAAElB;AAAd,OAAF,CAArB;AAAA;AANZ,IADD,EASG,CAAEkB,OAAF,IACD,cAAC,aAAD;AACC,IAAA,OAAO,EAAG8B,sBADX;AAEC,IAAA,KAAK,EAAGhC,QAFT;AAGC,IAAA,KAAK,EAAG7B,EAAE,CAAE,WAAF,CAHX;AAIC,IAAA,QAAQ,EAAGiE;AAJZ,IAVF,EAiBG,CAAA3C,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEP,IAAR,MAAiB,MAAjB,IACD,8BACC,cAAC,YAAD;AACC,IAAA,KAAK,EAAGf,EAAE,CAAE,SAAF,CADX;AAEC,IAAA,KAAK,EAAGsB,MAAM,CAACiE,OAFhB;AAGC,IAAA,QAAQ,EAAG,kBAAE1E,KAAF;AAAA,aACVW,SAAS,CAAE;AAAE+D,QAAAA,OAAO,EAAE1E;AAAX,OAAF,CADC;AAAA,KAHZ;AAMC,IAAA,GAAG,EAAG,CANP;AAOC,IAAA,GAAG,EAAG2E,IAAI,CAACC,GAAL,CAAU,CAAV,EAAanE,MAAM,CAACiE,OAApB;AAPP,IADD,EAUGjE,MAAM,CAACiE,OAAP,GAAiB,CAAjB,IACD,cAAC,MAAD;AAAQ,IAAA,MAAM,EAAC,SAAf;AAAyB,IAAA,aAAa,EAAG;AAAzC,KACGvF,EAAE,CACH,iFADG,CADL,CAXF,CAlBF,EAqCG,CAAE+B,OAAF,IACD,cAAC,aAAD,WACM;AAAEN,IAAAA,KAAK,EAALA,KAAF;AAASC,IAAAA,OAAO,EAAPA;AAAT,GADN;AAEC,IAAA,aAAa,EAAG,uBAAEb,KAAF;AAAA,aACfU,QAAQ,CAAE;AAAEE,QAAAA,KAAK,EAAEZ;AAAT,OAAF,CADO;AAAA,KAFjB;AAKC,IAAA,eAAe,EAAG,yBAAEA,KAAF;AAAA,aACjBU,QAAQ,CAAE;AAAEG,QAAAA,OAAO,EAAEb;AAAX,OAAF,CADS;AAAA;AALnB,KAtCF,EAgDGuB,UAAU,IACX,cAAC,aAAD;AACC,IAAA,KAAK,EAAGpC,EAAE,CAAE,cAAF,CADX;AAEC,IAAA,OAAO,EAAGW,aAFX;AAGC,IAAA,KAAK,EAAGmB,MAHT;AAIC,IAAA,QAAQ,EAAG,kBAAEjB,KAAF;AAAA,aAAaU,QAAQ,CAAE;AAAEO,QAAAA,MAAM,EAAEjB;AAAV,OAAF,CAArB;AAAA;AAJZ,IAjDF,CAFD,EA2DG,CAAEkB,OAAF,IACD,cAAC,SAAD;AAAW,IAAA,KAAK,EAAG/B,EAAE,CAAE,SAAF;AAArB,KACGgC,cAAc,IAAI,CAAAmB,UAAU,SAAV,IAAAA,UAAU,WAAV,iCAAAA,UAAU,CAAEoB,KAAZ,wEAAmBf,MAAnB,IAA4B,CAA9C,IACD,cAAC,cAAD;AACC,IAAA,KAAK,EAAGxD,EAAE,CAAE,YAAF,CADX;AAEC,IAAA,KAAK,EAAG,CAAEqB,KAAK,CAAC+C,WAAN,IAAqB,EAAvB,EAA4BN,GAA5B,CACP,UAAE4B,UAAF;AAAA,aAAoB;AACnBb,QAAAA,EAAE,EAAEa,UADe;AAEnB7E,QAAAA,KAAK,EACJsC,UAAU,CAACwC,OAAX,CAAoBD,UAApB,EAAiCE;AAHf,OAApB;AAAA,KADO,CAFT;AASC,IAAA,WAAW,EAAGzC,UAAU,CAAC0C,KAT1B;AAUC,IAAA,QAAQ,EAAGb;AAVZ,IAFF,EAeG9C,QAAQ,IAAI,CAAAkB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,2BAAAA,IAAI,CAAEmB,KAAN,4DAAaf,MAAb,IAAsB,CAAlC,IACD,cAAC,cAAD;AACC,IAAA,KAAK,EAAGxD,EAAE,CAAE,MAAF,CADX;AAEC,IAAA,KAAK,EAAG,CAAEqB,KAAK,CAACgD,MAAN,IAAgB,EAAlB,EAAuBP,GAAvB,CAA4B,UAAEgC,KAAF;AAAA,aAAe;AAClDjB,QAAAA,EAAE,EAAEiB,KAD8C;AAElDjF,QAAAA,KAAK,EAAEuC,IAAI,CAACuC,OAAL,CAAcG,KAAd,EAAsBF;AAFqB,OAAf;AAAA,KAA5B,CAFT;AAMC,IAAA,WAAW,EAAGxC,IAAI,CAACyC,KANpB;AAOC,IAAA,QAAQ,EAAGZ;AAPZ,IAhBF,EA0BC,cAAC,aAAD,WACM;AAAEtD,IAAAA,gBAAgB,EAAhBA,gBAAF;AAAoB0B,IAAAA,UAAU,EAAVA;AAApB,GADN;AAEC,IAAA,cAAc,EAAG,wBAAExC,KAAF;AAAA,aAChBU,QAAQ,CAAE;AACTK,QAAAA,MAAM,EAAEf,KAAK,KAAK,EAAV,GAAe,CAACA,KAAhB,GAAwBkF;AADvB,OAAF,CADQ;AAAA;AAFlB,KA1BD,EAkCC,cAAC,WAAD;AACC,IAAA,KAAK,EAAG/F,EAAE,CAAE,SAAF,CADX;AAEC,IAAA,KAAK,EAAGmF,WAFT;AAGC,IAAA,QAAQ,EAAGC;AAHZ,IAlCD,CA5DF,CADD;AAwGA","sourcesContent":["/**\n * External dependencies\n */\nimport { debounce } from 'lodash';\n\n/**\n * WordPress dependencies\n */\n\nimport {\n\tPanelBody,\n\tQueryControls,\n\tTextControl,\n\tFormTokenField,\n\tSelectControl,\n\tRangeControl,\n\tToggleControl,\n\tNotice,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { InspectorControls } from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\nimport { addQueryArgs } from '@wordpress/url';\nimport {\n\tuseEffect,\n\tuseState,\n\tuseCallback,\n\tuseMemo,\n\tcreateInterpolateElement,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getTermsInfo } from '../utils';\nimport { MAX_FETCHED_TERMS } from '../constants';\n\nconst stickyOptions = [\n\t{ label: __( 'Include' ), value: '' },\n\t{ label: __( 'Exclude' ), value: 'exclude' },\n\t{ label: __( 'Only' ), value: 'only' },\n];\n\nconst CreateNewPostLink = ( { type } ) => {\n\tconst newPostUrl = addQueryArgs( 'post-new.php', {\n\t\tpost_type: type,\n\t} );\n\treturn (\n\t\t<div className=\"wp-block-query__create-new-link\">\n\t\t\t{ createInterpolateElement(\n\t\t\t\t__( '<a>Create a new post</a> for this feed.' ),\n\t\t\t\t// eslint-disable-next-line jsx-a11y/anchor-has-content\n\t\t\t\t{ a: <a href={ newPostUrl } /> }\n\t\t\t) }\n\t\t</div>\n\t);\n};\n\nexport default function QueryInspectorControls( {\n\tattributes: { query, layout },\n\tsetQuery,\n\tsetLayout,\n} ) {\n\tconst {\n\t\torder,\n\t\torderBy,\n\t\tauthor: selectedAuthorId,\n\t\tpostType,\n\t\tsticky,\n\t\tinherit,\n\t} = query;\n\tconst [ showCategories, setShowCategories ] = useState( true );\n\tconst [ showTags, setShowTags ] = useState( true );\n\tconst [ showSticky, setShowSticky ] = useState( postType === 'post' );\n\tconst { authorList, categories, tags, postTypes } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEntityRecords, getPostTypes } = select( 'core' );\n\t\t\tconst termsQuery = { per_page: MAX_FETCHED_TERMS };\n\t\t\tconst _categories = getEntityRecords(\n\t\t\t\t'taxonomy',\n\t\t\t\t'category',\n\t\t\t\ttermsQuery\n\t\t\t);\n\t\t\tconst _tags = getEntityRecords(\n\t\t\t\t'taxonomy',\n\t\t\t\t'post_tag',\n\t\t\t\ttermsQuery\n\t\t\t);\n\t\t\tconst excludedPostTypes = [ 'attachment' ];\n\t\t\tconst filteredPostTypes = getPostTypes( { per_page: -1 } )?.filter(\n\t\t\t\t( { viewable, slug } ) =>\n\t\t\t\t\tviewable && ! excludedPostTypes.includes( slug )\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tcategories: getTermsInfo( _categories ),\n\t\t\t\ttags: getTermsInfo( _tags ),\n\t\t\t\tauthorList: getEntityRecords( 'root', 'user', {\n\t\t\t\t\tper_page: -1,\n\t\t\t\t} ),\n\t\t\t\tpostTypes: filteredPostTypes,\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\tconst postTypesTaxonomiesMap = useMemo( () => {\n\t\tif ( ! postTypes?.length ) return;\n\t\treturn postTypes.reduce( ( accumulator, type ) => {\n\t\t\taccumulator[ type.slug ] = type.taxonomies;\n\t\t\treturn accumulator;\n\t\t}, {} );\n\t}, [ postTypes ] );\n\tuseEffect( () => {\n\t\tif ( ! postTypesTaxonomiesMap ) return;\n\t\tconst postTypeTaxonomies = postTypesTaxonomiesMap[ postType ];\n\t\tsetShowCategories( postTypeTaxonomies.includes( 'category' ) );\n\t\tsetShowTags( postTypeTaxonomies.includes( 'post_tag' ) );\n\t}, [ postType, postTypesTaxonomiesMap ] );\n\tuseEffect( () => {\n\t\tsetShowSticky( postType === 'post' );\n\t}, [ postType ] );\n\tconst postTypesSelectOptions = useMemo(\n\t\t() =>\n\t\t\t( postTypes || [] ).map( ( { labels, slug } ) => ( {\n\t\t\t\tlabel: labels.singular_name,\n\t\t\t\tvalue: slug,\n\t\t\t} ) ),\n\t\t[ postTypes ]\n\t);\n\tconst onPostTypeChange = ( newValue ) => {\n\t\tconst updateQuery = { postType: newValue };\n\t\tif ( ! postTypesTaxonomiesMap[ newValue ].includes( 'category' ) ) {\n\t\t\tupdateQuery.categoryIds = [];\n\t\t}\n\t\tif ( ! postTypesTaxonomiesMap[ newValue ].includes( 'post_tag' ) ) {\n\t\t\tupdateQuery.tagIds = [];\n\t\t}\n\t\tif ( newValue !== 'post' ) {\n\t\t\tupdateQuery.sticky = '';\n\t\t}\n\t\tsetQuery( updateQuery );\n\t};\n\t// Handles categories and tags changes.\n\tconst onTermsChange = ( terms, queryProperty ) => ( newTermValues ) => {\n\t\tconst termIds = newTermValues.reduce( ( accumulator, termValue ) => {\n\t\t\tconst termId = termValue?.id || terms.mapByName[ termValue ]?.id;\n\t\t\tif ( termId ) accumulator.push( termId );\n\t\t\treturn accumulator;\n\t\t}, [] );\n\t\tsetQuery( { [ queryProperty ]: termIds } );\n\t};\n\tconst onCategoriesChange = onTermsChange( categories, 'categoryIds' );\n\tconst onTagsChange = onTermsChange( tags, 'tagIds' );\n\n\tconst [ querySearch, setQuerySearch ] = useState( query.search );\n\tconst onChangeDebounced = useCallback(\n\t\tdebounce( () => {\n\t\t\tif ( query.search !== querySearch ) {\n\t\t\t\tsetQuery( { search: querySearch } );\n\t\t\t}\n\t\t}, 250 ),\n\t\t[ querySearch, query.search ]\n\t);\n\n\tuseEffect( () => {\n\t\tonChangeDebounced();\n\t\treturn onChangeDebounced.cancel;\n\t}, [ querySearch, onChangeDebounced ] );\n\n\treturn (\n\t\t<InspectorControls>\n\t\t\t<CreateNewPostLink type={ postType } />\n\t\t\t<PanelBody title={ __( 'Settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Inherit query from URL' ) }\n\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t'Disable the option to customize the query arguments. Leave enabled to inherit the global query depending on the URL.'\n\t\t\t\t\t) }\n\t\t\t\t\tchecked={ !! inherit }\n\t\t\t\t\tonChange={ ( value ) => setQuery( { inherit: !! value } ) }\n\t\t\t\t/>\n\t\t\t\t{ ! inherit && (\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\toptions={ postTypesSelectOptions }\n\t\t\t\t\t\tvalue={ postType }\n\t\t\t\t\t\tlabel={ __( 'Post Type' ) }\n\t\t\t\t\t\tonChange={ onPostTypeChange }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ layout?.type === 'flex' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\t\tvalue={ layout.columns }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetLayout( { columns: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmin={ 2 }\n\t\t\t\t\t\t\tmax={ Math.max( 6, layout.columns ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ layout.columns > 6 && (\n\t\t\t\t\t\t\t<Notice status=\"warning\" isDismissible={ false }>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'This column count exceeds the recommended amount and may cause visual breakage.'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Notice>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ ! inherit && (\n\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t{ ...{ order, orderBy } }\n\t\t\t\t\t\tonOrderChange={ ( value ) =>\n\t\t\t\t\t\t\tsetQuery( { order: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonOrderByChange={ ( value ) =>\n\t\t\t\t\t\t\tsetQuery( { orderBy: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ showSticky && (\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __( 'Sticky posts' ) }\n\t\t\t\t\t\toptions={ stickyOptions }\n\t\t\t\t\t\tvalue={ sticky }\n\t\t\t\t\t\tonChange={ ( value ) => setQuery( { sticky: value } ) }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelBody>\n\t\t\t{ ! inherit && (\n\t\t\t\t<PanelBody title={ __( 'Filters' ) }>\n\t\t\t\t\t{ showCategories && categories?.terms?.length > 0 && (\n\t\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\t\tlabel={ __( 'Categories' ) }\n\t\t\t\t\t\t\tvalue={ ( query.categoryIds || [] ).map(\n\t\t\t\t\t\t\t\t( categoryId ) => ( {\n\t\t\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\t\t\tvalue:\n\t\t\t\t\t\t\t\t\t\tcategories.mapById[ categoryId ].name,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tsuggestions={ categories.names }\n\t\t\t\t\t\t\tonChange={ onCategoriesChange }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showTags && tags?.terms?.length > 0 && (\n\t\t\t\t\t\t<FormTokenField\n\t\t\t\t\t\t\tlabel={ __( 'Tags' ) }\n\t\t\t\t\t\t\tvalue={ ( query.tagIds || [] ).map( ( tagId ) => ( {\n\t\t\t\t\t\t\t\tid: tagId,\n\t\t\t\t\t\t\t\tvalue: tags.mapById[ tagId ].name,\n\t\t\t\t\t\t\t} ) ) }\n\t\t\t\t\t\t\tsuggestions={ tags.names }\n\t\t\t\t\t\t\tonChange={ onTagsChange }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<QueryControls\n\t\t\t\t\t\t{ ...{ selectedAuthorId, authorList } }\n\t\t\t\t\t\tonAuthorChange={ ( value ) =>\n\t\t\t\t\t\t\tsetQuery( {\n\t\t\t\t\t\t\t\tauthor: value !== '' ? +value : undefined,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Keyword' ) }\n\t\t\t\t\t\tvalue={ querySearch }\n\t\t\t\t\t\tonChange={ setQuerySearch }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t) }\n\t\t</InspectorControls>\n\t);\n}\n"]}