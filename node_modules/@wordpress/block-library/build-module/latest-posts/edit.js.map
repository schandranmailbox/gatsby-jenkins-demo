{"version":3,"sources":["@wordpress/block-library/src/latest-posts/edit.js"],"names":["get","includes","invoke","isUndefined","pickBy","classnames","useState","RawHTML","useEffect","useRef","BaseControl","PanelBody","Placeholder","QueryControls","RadioControl","RangeControl","Spinner","ToggleControl","ToolbarGroup","apiFetch","addQueryArgs","__","sprintf","dateI18n","format","__experimentalGetSettings","InspectorControls","BlockAlignmentToolbar","BlockControls","__experimentalImageSizeControl","ImageSizeControl","useBlockProps","useSelect","pin","list","grid","MIN_EXCERPT_LENGTH","MAX_EXCERPT_LENGTH","MAX_POSTS_COLUMNS","CATEGORIES_LIST_QUERY","per_page","USERS_LIST_QUERY","LatestPostsEdit","attributes","setAttributes","postsToShow","order","orderBy","categories","selectedAuthor","displayFeaturedImage","displayPostContentRadio","displayPostContent","displayPostDate","displayAuthor","postLayout","columns","excerptLength","featuredImageAlign","featuredImageSizeSlug","featuredImageSizeWidth","featuredImageSizeHeight","addLinkToFeaturedImage","select","getEntityRecords","getMedia","getSettings","imageSizes","imageDimensions","catIds","length","map","cat","id","latestPostsQuery","author","orderby","value","posts","defaultImageWidth","defaultImageHeight","imageSizeOptions","filter","slug","name","label","latestPosts","Array","isArray","post","featured_media","image","url","featuredImageInfo","alt","alt_text","categoriesList","setCategoriesList","authorList","setAuthorList","categorySuggestions","reduce","accumulator","category","selectCategories","tokens","hasNoSuggestion","some","token","allCategories","isStillMounted","current","path","then","data","catch","inspectorControls","newAttrs","hasOwnProperty","width","height","undefined","Number","hasPosts","Math","min","blockProps","className","displayPosts","slice","layoutControls","icon","title","onClick","isActive","dateFormat","formats","date","i","titleTrimmed","excerpt","rendered","currentAuthor","find","excerptElement","document","createElement","innerHTML","textContent","innerText","imageSourceUrl","featuredImageAlt","imageClasses","renderFeaturedImage","featuredImage","maxWidth","maxHeight","needsReadMore","trim","split","raw","postExcerpt","join","link","date_gmt","content"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { get, includes, invoke, isUndefined, pickBy } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useState, RawHTML, useEffect, useRef } from '@wordpress/element';\nimport {\n\tBaseControl,\n\tPanelBody,\n\tPlaceholder,\n\tQueryControls,\n\tRadioControl,\n\tRangeControl,\n\tSpinner,\n\tToggleControl,\n\tToolbarGroup,\n} from '@wordpress/components';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { dateI18n, format, __experimentalGetSettings } from '@wordpress/date';\nimport {\n\tInspectorControls,\n\tBlockAlignmentToolbar,\n\tBlockControls,\n\t__experimentalImageSizeControl as ImageSizeControl,\n\tuseBlockProps,\n} from '@wordpress/block-editor';\nimport { useSelect } from '@wordpress/data';\nimport { pin, list, grid } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport {\n\tMIN_EXCERPT_LENGTH,\n\tMAX_EXCERPT_LENGTH,\n\tMAX_POSTS_COLUMNS,\n} from './constants';\n\n/**\n * Module Constants\n */\nconst CATEGORIES_LIST_QUERY = {\n\tper_page: -1,\n};\nconst USERS_LIST_QUERY = {\n\tper_page: -1,\n};\n\nexport default function LatestPostsEdit( { attributes, setAttributes } ) {\n\tconst {\n\t\tpostsToShow,\n\t\torder,\n\t\torderBy,\n\t\tcategories,\n\t\tselectedAuthor,\n\t\tdisplayFeaturedImage,\n\t\tdisplayPostContentRadio,\n\t\tdisplayPostContent,\n\t\tdisplayPostDate,\n\t\tdisplayAuthor,\n\t\tpostLayout,\n\t\tcolumns,\n\t\texcerptLength,\n\t\tfeaturedImageAlign,\n\t\tfeaturedImageSizeSlug,\n\t\tfeaturedImageSizeWidth,\n\t\tfeaturedImageSizeHeight,\n\t\taddLinkToFeaturedImage,\n\t} = attributes;\n\tconst {\n\t\timageSizeOptions,\n\t\tlatestPosts,\n\t\tdefaultImageWidth,\n\t\tdefaultImageHeight,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEntityRecords, getMedia } = select( 'core' );\n\t\t\tconst { getSettings } = select( 'core/block-editor' );\n\t\t\tconst { imageSizes, imageDimensions } = getSettings();\n\t\t\tconst catIds =\n\t\t\t\tcategories && categories.length > 0\n\t\t\t\t\t? categories.map( ( cat ) => cat.id )\n\t\t\t\t\t: [];\n\t\t\tconst latestPostsQuery = pickBy(\n\t\t\t\t{\n\t\t\t\t\tcategories: catIds,\n\t\t\t\t\tauthor: selectedAuthor,\n\t\t\t\t\torder,\n\t\t\t\t\torderby: orderBy,\n\t\t\t\t\tper_page: postsToShow,\n\t\t\t\t},\n\t\t\t\t( value ) => ! isUndefined( value )\n\t\t\t);\n\n\t\t\tconst posts = getEntityRecords(\n\t\t\t\t'postType',\n\t\t\t\t'post',\n\t\t\t\tlatestPostsQuery\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\tdefaultImageWidth: get(\n\t\t\t\t\timageDimensions,\n\t\t\t\t\t[ featuredImageSizeSlug, 'width' ],\n\t\t\t\t\t0\n\t\t\t\t),\n\t\t\t\tdefaultImageHeight: get(\n\t\t\t\t\timageDimensions,\n\t\t\t\t\t[ featuredImageSizeSlug, 'height' ],\n\t\t\t\t\t0\n\t\t\t\t),\n\t\t\t\timageSizeOptions: imageSizes\n\t\t\t\t\t.filter( ( { slug } ) => slug !== 'full' )\n\t\t\t\t\t.map( ( { name, slug } ) => ( {\n\t\t\t\t\t\tvalue: slug,\n\t\t\t\t\t\tlabel: name,\n\t\t\t\t\t} ) ),\n\t\t\t\tlatestPosts: ! Array.isArray( posts )\n\t\t\t\t\t? posts\n\t\t\t\t\t: posts.map( ( post ) => {\n\t\t\t\t\t\t\tif ( ! post.featured_media ) return post;\n\n\t\t\t\t\t\t\tconst image = getMedia( post.featured_media );\n\t\t\t\t\t\t\tlet url = get(\n\t\t\t\t\t\t\t\timage,\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t'media_details',\n\t\t\t\t\t\t\t\t\t'sizes',\n\t\t\t\t\t\t\t\t\tfeaturedImageSizeSlug,\n\t\t\t\t\t\t\t\t\t'source_url',\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif ( ! url ) {\n\t\t\t\t\t\t\t\turl = get( image, 'source_url', null );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst featuredImageInfo = {\n\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\t\t\t\talt: image?.alt_text,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn { ...post, featuredImageInfo };\n\t\t\t\t\t  } ),\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tfeaturedImageSizeSlug,\n\t\t\tpostsToShow,\n\t\t\torder,\n\t\t\torderBy,\n\t\t\tcategories,\n\t\t\tselectedAuthor,\n\t\t]\n\t);\n\tconst [ categoriesList, setCategoriesList ] = useState( [] );\n\tconst [ authorList, setAuthorList ] = useState( [] );\n\tconst categorySuggestions = categoriesList.reduce(\n\t\t( accumulator, category ) => ( {\n\t\t\t...accumulator,\n\t\t\t[ category.name ]: category,\n\t\t} ),\n\t\t{}\n\t);\n\tconst selectCategories = ( tokens ) => {\n\t\tconst hasNoSuggestion = tokens.some(\n\t\t\t( token ) =>\n\t\t\t\ttypeof token === 'string' && ! categorySuggestions[ token ]\n\t\t);\n\t\tif ( hasNoSuggestion ) {\n\t\t\treturn;\n\t\t}\n\t\t// Categories that are already will be objects, while new additions will be strings (the name).\n\t\t// allCategories nomalizes the array so that they are all objects.\n\t\tconst allCategories = tokens.map( ( token ) => {\n\t\t\treturn typeof token === 'string'\n\t\t\t\t? categorySuggestions[ token ]\n\t\t\t\t: token;\n\t\t} );\n\t\t// We do nothing if the category is not selected\n\t\t// from suggestions.\n\t\tif ( includes( allCategories, null ) ) {\n\t\t\treturn false;\n\t\t}\n\t\tsetAttributes( { categories: allCategories } );\n\t};\n\n\tconst isStillMounted = useRef();\n\n\tuseEffect( () => {\n\t\tisStillMounted.current = true;\n\n\t\tapiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/categories`, CATEGORIES_LIST_QUERY ),\n\t\t} )\n\t\t\t.then( ( data ) => {\n\t\t\t\tif ( isStillMounted.current ) {\n\t\t\t\t\tsetCategoriesList( data );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( isStillMounted.current ) {\n\t\t\t\t\tsetCategoriesList( [] );\n\t\t\t\t}\n\t\t\t} );\n\t\tapiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/users`, USERS_LIST_QUERY ),\n\t\t} )\n\t\t\t.then( ( data ) => {\n\t\t\t\tif ( isStillMounted.current ) {\n\t\t\t\t\tsetAuthorList( data );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( isStillMounted.current ) {\n\t\t\t\t\tsetAuthorList( [] );\n\t\t\t\t}\n\t\t\t} );\n\n\t\treturn () => {\n\t\t\tisStillMounted.current = false;\n\t\t};\n\t}, [] );\n\n\tconst inspectorControls = (\n\t\t<InspectorControls>\n\t\t\t<PanelBody title={ __( 'Post content settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Post content' ) }\n\t\t\t\t\tchecked={ displayPostContent }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { displayPostContent: value } )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{ displayPostContent && (\n\t\t\t\t\t<RadioControl\n\t\t\t\t\t\tlabel={ __( 'Show:' ) }\n\t\t\t\t\t\tselected={ displayPostContentRadio }\n\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t{ label: __( 'Excerpt' ), value: 'excerpt' },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __( 'Full post' ),\n\t\t\t\t\t\t\t\tvalue: 'full_post',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tdisplayPostContentRadio: value,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ displayPostContent &&\n\t\t\t\t\tdisplayPostContentRadio === 'excerpt' && (\n\t\t\t\t\t\t<RangeControl\n\t\t\t\t\t\t\tlabel={ __( 'Max number of words in excerpt' ) }\n\t\t\t\t\t\t\tvalue={ excerptLength }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { excerptLength: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmin={ MIN_EXCERPT_LENGTH }\n\t\t\t\t\t\t\tmax={ MAX_EXCERPT_LENGTH }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t</PanelBody>\n\n\t\t\t<PanelBody title={ __( 'Post meta settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Display author name' ) }\n\t\t\t\t\tchecked={ displayAuthor }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { displayAuthor: value } )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Display post date' ) }\n\t\t\t\t\tchecked={ displayPostDate }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { displayPostDate: value } )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</PanelBody>\n\n\t\t\t<PanelBody title={ __( 'Featured image settings' ) }>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Display featured image' ) }\n\t\t\t\t\tchecked={ displayFeaturedImage }\n\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { displayFeaturedImage: value } )\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{ displayFeaturedImage && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ImageSizeControl\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tconst newAttrs = {};\n\t\t\t\t\t\t\t\tif ( value.hasOwnProperty( 'width' ) ) {\n\t\t\t\t\t\t\t\t\tnewAttrs.featuredImageSizeWidth =\n\t\t\t\t\t\t\t\t\t\tvalue.width;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( value.hasOwnProperty( 'height' ) ) {\n\t\t\t\t\t\t\t\t\tnewAttrs.featuredImageSizeHeight =\n\t\t\t\t\t\t\t\t\t\tvalue.height;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tsetAttributes( newAttrs );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tslug={ featuredImageSizeSlug }\n\t\t\t\t\t\t\twidth={ featuredImageSizeWidth }\n\t\t\t\t\t\t\theight={ featuredImageSizeHeight }\n\t\t\t\t\t\t\timageWidth={ defaultImageWidth }\n\t\t\t\t\t\t\timageHeight={ defaultImageHeight }\n\t\t\t\t\t\t\timageSizeOptions={ imageSizeOptions }\n\t\t\t\t\t\t\tonChangeImage={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tfeaturedImageSizeSlug: value,\n\t\t\t\t\t\t\t\t\tfeaturedImageSizeWidth: undefined,\n\t\t\t\t\t\t\t\t\tfeaturedImageSizeHeight: undefined,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BaseControl className=\"block-editor-image-alignment-control__row\">\n\t\t\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t{ __( 'Image alignment' ) }\n\t\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t\t\t<BlockAlignmentToolbar\n\t\t\t\t\t\t\t\tvalue={ featuredImageAlign }\n\t\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tfeaturedImageAlign: value,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontrols={ [ 'left', 'center', 'right' ] }\n\t\t\t\t\t\t\t\tisCollapsed={ false }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</BaseControl>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __( 'Add link to featured image' ) }\n\t\t\t\t\t\t\tchecked={ addLinkToFeaturedImage }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\taddLinkToFeaturedImage: value,\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</PanelBody>\n\n\t\t\t<PanelBody title={ __( 'Sorting and filtering' ) }>\n\t\t\t\t<QueryControls\n\t\t\t\t\t{ ...{ order, orderBy } }\n\t\t\t\t\tnumberOfItems={ postsToShow }\n\t\t\t\t\tonOrderChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { order: value } )\n\t\t\t\t\t}\n\t\t\t\t\tonOrderByChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { orderBy: value } )\n\t\t\t\t\t}\n\t\t\t\t\tonNumberOfItemsChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( { postsToShow: value } )\n\t\t\t\t\t}\n\t\t\t\t\tcategorySuggestions={ categorySuggestions }\n\t\t\t\t\tonCategoryChange={ selectCategories }\n\t\t\t\t\tselectedCategories={ categories }\n\t\t\t\t\tonAuthorChange={ ( value ) =>\n\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\tselectedAuthor:\n\t\t\t\t\t\t\t\t'' !== value ? Number( value ) : undefined,\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t\tauthorList={ authorList }\n\t\t\t\t\tselectedAuthorId={ selectedAuthor }\n\t\t\t\t/>\n\n\t\t\t\t{ postLayout === 'grid' && (\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\tvalue={ columns }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { columns: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmin={ 2 }\n\t\t\t\t\t\tmax={\n\t\t\t\t\t\t\t! hasPosts\n\t\t\t\t\t\t\t\t? MAX_POSTS_COLUMNS\n\t\t\t\t\t\t\t\t: Math.min(\n\t\t\t\t\t\t\t\t\t\tMAX_POSTS_COLUMNS,\n\t\t\t\t\t\t\t\t\t\tlatestPosts.length\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n\n\tconst blockProps = useBlockProps( {\n\t\tclassName: classnames( {\n\t\t\t'wp-block-latest-posts__list': true,\n\t\t\t'is-grid': postLayout === 'grid',\n\t\t\t'has-dates': displayPostDate,\n\t\t\t'has-author': displayAuthor,\n\t\t\t[ `columns-${ columns }` ]: postLayout === 'grid',\n\t\t} ),\n\t} );\n\n\tconst hasPosts = Array.isArray( latestPosts ) && latestPosts.length;\n\tif ( ! hasPosts ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t{ inspectorControls }\n\t\t\t\t<Placeholder icon={ pin } label={ __( 'Latest Posts' ) }>\n\t\t\t\t\t{ ! Array.isArray( latestPosts ) ? (\n\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t__( 'No posts found.' )\n\t\t\t\t\t) }\n\t\t\t\t</Placeholder>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Removing posts from display should be instant.\n\tconst displayPosts =\n\t\tlatestPosts.length > postsToShow\n\t\t\t? latestPosts.slice( 0, postsToShow )\n\t\t\t: latestPosts;\n\n\tconst layoutControls = [\n\t\t{\n\t\t\ticon: list,\n\t\t\ttitle: __( 'List view' ),\n\t\t\tonClick: () => setAttributes( { postLayout: 'list' } ),\n\t\t\tisActive: postLayout === 'list',\n\t\t},\n\t\t{\n\t\t\ticon: grid,\n\t\t\ttitle: __( 'Grid view' ),\n\t\t\tonClick: () => setAttributes( { postLayout: 'grid' } ),\n\t\t\tisActive: postLayout === 'grid',\n\t\t},\n\t];\n\n\tconst dateFormat = __experimentalGetSettings().formats.date;\n\n\treturn (\n\t\t<>\n\t\t\t{ inspectorControls }\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup controls={ layoutControls } />\n\t\t\t</BlockControls>\n\t\t\t<ul { ...blockProps }>\n\t\t\t\t{ displayPosts.map( ( post, i ) => {\n\t\t\t\t\tconst titleTrimmed = invoke( post, [\n\t\t\t\t\t\t'title',\n\t\t\t\t\t\t'rendered',\n\t\t\t\t\t\t'trim',\n\t\t\t\t\t] );\n\t\t\t\t\tlet excerpt = post.excerpt.rendered;\n\t\t\t\t\tconst currentAuthor = authorList.find(\n\t\t\t\t\t\t( author ) => author.id === post.author\n\t\t\t\t\t);\n\n\t\t\t\t\tconst excerptElement = document.createElement( 'div' );\n\t\t\t\t\texcerptElement.innerHTML = excerpt;\n\n\t\t\t\t\texcerpt =\n\t\t\t\t\t\texcerptElement.textContent ||\n\t\t\t\t\t\texcerptElement.innerText ||\n\t\t\t\t\t\t'';\n\n\t\t\t\t\tconst {\n\t\t\t\t\t\tfeaturedImageInfo: {\n\t\t\t\t\t\t\turl: imageSourceUrl,\n\t\t\t\t\t\t\talt: featuredImageAlt,\n\t\t\t\t\t\t} = {},\n\t\t\t\t\t} = post;\n\t\t\t\t\tconst imageClasses = classnames( {\n\t\t\t\t\t\t'wp-block-latest-posts__featured-image': true,\n\t\t\t\t\t\t[ `align${ featuredImageAlign }` ]: !! featuredImageAlign,\n\t\t\t\t\t} );\n\t\t\t\t\tconst renderFeaturedImage =\n\t\t\t\t\t\tdisplayFeaturedImage && imageSourceUrl;\n\t\t\t\t\tconst featuredImage = renderFeaturedImage && (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={ imageSourceUrl }\n\t\t\t\t\t\t\talt={ featuredImageAlt }\n\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\tmaxWidth: featuredImageSizeWidth,\n\t\t\t\t\t\t\t\tmaxHeight: featuredImageSizeHeight,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\tconst needsReadMore =\n\t\t\t\t\t\texcerptLength < excerpt.trim().split( ' ' ).length &&\n\t\t\t\t\t\tpost.excerpt.raw === '';\n\n\t\t\t\t\tconst postExcerpt = needsReadMore ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{ excerpt\n\t\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t\t.split( ' ', excerptLength )\n\t\t\t\t\t\t\t\t.join( ' ' ) }\n\t\t\t\t\t\t\t{ /* translators: excerpt truncation character, default …  */ }\n\t\t\t\t\t\t\t{ __( ' … ' ) }\n\t\t\t\t\t\t\t<a href={ post.link } rel=\"noopener noreferrer\">\n\t\t\t\t\t\t\t\t{ __( 'Read more' ) }\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\texcerpt\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={ i }>\n\t\t\t\t\t\t\t{ renderFeaturedImage && (\n\t\t\t\t\t\t\t\t<div className={ imageClasses }>\n\t\t\t\t\t\t\t\t\t{ addLinkToFeaturedImage ? (\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={ post.link }\n\t\t\t\t\t\t\t\t\t\t\trel=\"noreferrer noopener\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ featuredImage }\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\tfeaturedImage\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<a href={ post.link } rel=\"noreferrer noopener\">\n\t\t\t\t\t\t\t\t{ titleTrimmed ? (\n\t\t\t\t\t\t\t\t\t<RawHTML>{ titleTrimmed }</RawHTML>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t__( '(no title)' )\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{ displayAuthor && currentAuthor && (\n\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-author\">\n\t\t\t\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t\t\t\t/* translators: byline. %s: current author. */\n\t\t\t\t\t\t\t\t\t\t__( 'by %s' ),\n\t\t\t\t\t\t\t\t\t\tcurrentAuthor.name\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ displayPostDate && post.date_gmt && (\n\t\t\t\t\t\t\t\t<time\n\t\t\t\t\t\t\t\t\tdateTime={ format( 'c', post.date_gmt ) }\n\t\t\t\t\t\t\t\t\tclassName=\"wp-block-latest-posts__post-date\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ dateI18n( dateFormat, post.date_gmt ) }\n\t\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t\t\t\tdisplayPostContentRadio === 'excerpt' && (\n\t\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-excerpt\">\n\t\t\t\t\t\t\t\t\t\t{ postExcerpt }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ displayPostContent &&\n\t\t\t\t\t\t\t\tdisplayPostContentRadio === 'full_post' && (\n\t\t\t\t\t\t\t\t\t<div className=\"wp-block-latest-posts__post-full-content\">\n\t\t\t\t\t\t\t\t\t\t<RawHTML key=\"html\">\n\t\t\t\t\t\t\t\t\t\t\t{ post.content.raw.trim() }\n\t\t\t\t\t\t\t\t\t\t</RawHTML>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t</>\n\t);\n}\n"]}