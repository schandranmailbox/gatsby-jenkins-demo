{"version":3,"sources":["@wordpress/block-library/src/group/edit.native.js"],"names":["View","Dimensions","withSelect","compose","withPreferredColorScheme","useResizeObserver","InnerBlocks","useCallback","alignmentHelpers","styles","isWider","isFullWidth","GroupEdit","attributes","hasInnerBlocks","isSelected","isLastInnerBlockSelected","getStylesFromColorScheme","mergedStyle","blockWidth","align","resizeObserver","sizes","width","screenWidth","Math","floor","get","isEqualWidth","renderAppender","groupAppender","wideGroupAppender","groupPlaceholder","groupPlaceholderDark","marginVerticalDense","marginHorizontalNone","innerBlocks","backgroundColor","hasBackgroundAppender","select","clientId","getBlock","getBlockIndex","hasSelectedInnerBlock","getBlockRootClientId","getSelectedBlockClientId","getBlockAttributes","block","length","isInnerBlockSelected","selectedBlockClientId","totalInnerBlocks","blockIndex","parentId","parentBlockAlignment"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA,SAASA,IAAT,EAAeC,UAAf,QAAiC,cAAjC;AAEA;AACA;AACA;;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,SACCC,OADD,EAECC,wBAFD,EAGCC,iBAHD,QAIO,oBAJP;AAKA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,SAASC,gBAAT,QAAiC,uBAAjC;AAEA;AACA;AACA;;AACA,OAAOC,MAAP,MAAmB,eAAnB;IAEQC,O,GAAyBF,gB,CAAzBE,O;IAASC,W,GAAgBH,gB,CAAhBG,W;;AAEjB,SAASC,SAAT,OAQI;AAAA,MAPHC,UAOG,QAPHA,UAOG;AAAA,MANHC,cAMG,QANHA,cAMG;AAAA,MALHC,UAKG,QALHA,UAKG;AAAA,MAJHC,wBAIG,QAJHA,wBAIG;AAAA,MAHHC,wBAGG,QAHHA,wBAGG;AAAA,MAFHC,WAEG,QAFHA,WAEG;AAAA,MADHC,UACG,QADHA,UACG;AAAA,MACKC,KADL,GACeP,UADf,CACKO,KADL;;AAAA,2BAE+Bf,iBAAiB,EAFhD;AAAA;AAAA,MAEKgB,cAFL;AAAA,MAEqBC,KAFrB;;AAAA,cAGeA,KAAK,IAAI;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAHxB;AAAA,MAGKA,KAHL,SAGKA,KAHL;;AAIH,MAAMC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAYzB,UAAU,CAAC0B,GAAX,CAAgB,QAAhB,EAA2BJ,KAAvC,CAApB;AACA,MAAMK,YAAY,GAAGL,KAAK,KAAKC,WAA/B;AAEA,MAAMK,cAAc,GAAGtB,WAAW,CACjC;AAAA,WACC,cAAC,IAAD;AACC,MAAA,KAAK,EACJ,CAAEG,OAAO,CAAEc,WAAF,EAAe,QAAf,CAAP,IACDI,YADC,IAEDjB,WAAW,CAAES,KAAF,CAFZ,MAGEN,cAAc,GACbL,MAAM,CAACqB,aADM,GAEbrB,MAAM,CAACsB,iBALV;AAFF,OAUC,cAAC,WAAD,CAAa,mBAAb,OAVD,CADD;AAAA,GADiC,EAejC,CAAEX,KAAF,EAASN,cAAT,EAAyBS,KAAzB,CAfiC,CAAlC;;AAkBA,MAAK,CAAER,UAAF,IAAgB,CAAED,cAAvB,EAAwC;AACvC,WACC,cAAC,IAAD;AACC,MAAA,KAAK,EAAG,CACPG,wBAAwB,CACvBR,MAAM,CAACuB,gBADgB,EAEvBvB,MAAM,CAACwB,oBAFgB,CADjB,EAKP,CAAEnB,cAAF,oCACIL,MAAM,CAACyB,mBADX,GAEIzB,MAAM,CAAC0B,oBAFX,CALO;AADT,MADD;AAcA;;AAED,SACC,cAAC,IAAD;AACC,IAAA,KAAK,EAAG,CACPpB,UAAU,IAAID,cAAd,IAAgCL,MAAM,CAAC2B,WADhC,EAEPlB,WAFO,EAGPH,UAAU,IACTD,cADD,KAECI,WAFD,aAECA,WAFD,uBAECA,WAAW,CAAEmB,eAFd,KAGC5B,MAAM,CAAC6B,qBAND,EAOPtB,wBAAwB,KACvBE,WADuB,aACvBA,WADuB,uBACvBA,WAAW,CAAEmB,eADU,CAAxB,IAEC5B,MAAM,CAACO,wBATD;AADT,KAaGK,cAbH,EAcC,cAAC,WAAD;AACC,IAAA,cAAc,EAAGN,UAAU,IAAIc,cADhC;AAEC,IAAA,WAAW,EAAGN,KAFf;AAGC,IAAA,UAAU,EAAGJ;AAHd,IAdD,CADD;AAsBA;;AAED,eAAehB,OAAO,CAAE,CACvBD,UAAU,CAAE,UAAEqC,MAAF,SAA4B;AAAA;;AAAA,MAAhBC,QAAgB,SAAhBA,QAAgB;;AAAA,gBAQnCD,MAAM,CAAE,mBAAF,CAR6B;AAAA,MAEtCE,QAFsC,WAEtCA,QAFsC;AAAA,MAGtCC,aAHsC,WAGtCA,aAHsC;AAAA,MAItCC,qBAJsC,WAItCA,qBAJsC;AAAA,MAKtCC,oBALsC,WAKtCA,oBALsC;AAAA,MAMtCC,wBANsC,WAMtCA,wBANsC;AAAA,MAOtCC,kBAPsC,WAOtCA,kBAPsC;;AAUvC,MAAMC,KAAK,GAAGN,QAAQ,CAAED,QAAF,CAAtB;AACA,MAAM1B,cAAc,GAAG,CAAC,EAAIiC,KAAK,IAAIA,KAAK,CAACX,WAAN,CAAkBY,MAA/B,CAAxB;AACA,MAAMC,oBAAoB,GACzBnC,cAAc,IAAI6B,qBAAqB,CAAEH,QAAF,EAAY,IAAZ,CADxC;AAEA,MAAIxB,wBAAwB,GAAG,KAA/B;;AAEA,MAAKiC,oBAAL,EAA4B;AAAA,QACnBb,WADmB,GACHW,KADG,CACnBX,WADmB;AAE3B,QAAMc,qBAAqB,GAAGL,wBAAwB,EAAtD;AACA,QAAMM,gBAAgB,GAAGf,WAAW,CAACY,MAAZ,GAAqB,CAA9C;AACA,QAAMI,UAAU,GAAGV,aAAa,CAAEQ,qBAAF,EAAyBV,QAAzB,CAAhC;AACAxB,IAAAA,wBAAwB,GAAGmC,gBAAgB,KAAKC,UAAhD;AACA;;AAED,MAAMC,QAAQ,GAAGT,oBAAoB,CAAEJ,QAAF,CAArC;AACA,MAAMc,oBAAoB,0BAAGR,kBAAkB,CAAEO,QAAF,CAArB,wDAAG,oBAAgCjC,KAA7D;AAEA,SAAO;AACNN,IAAAA,cAAc,EAAdA,cADM;AAENE,IAAAA,wBAAwB,EAAxBA,wBAFM;AAGNsC,IAAAA,oBAAoB,EAApBA;AAHM,GAAP;AAKA,CAhCS,CADa,EAkCvBlD,wBAlCuB,CAAF,CAAP,CAmCVQ,SAnCU,CAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Dimensions } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport {\n\tcompose,\n\twithPreferredColorScheme,\n\tuseResizeObserver,\n} from '@wordpress/compose';\nimport { InnerBlocks } from '@wordpress/block-editor';\nimport { useCallback } from '@wordpress/element';\nimport { alignmentHelpers } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\n\nconst { isWider, isFullWidth } = alignmentHelpers;\n\nfunction GroupEdit( {\n\tattributes,\n\thasInnerBlocks,\n\tisSelected,\n\tisLastInnerBlockSelected,\n\tgetStylesFromColorScheme,\n\tmergedStyle,\n\tblockWidth,\n} ) {\n\tconst { align } = attributes;\n\tconst [ resizeObserver, sizes ] = useResizeObserver();\n\tconst { width } = sizes || { width: 0 };\n\tconst screenWidth = Math.floor( Dimensions.get( 'window' ).width );\n\tconst isEqualWidth = width === screenWidth;\n\n\tconst renderAppender = useCallback(\n\t\t() => (\n\t\t\t<View\n\t\t\t\tstyle={\n\t\t\t\t\t( isWider( screenWidth, 'mobile' ) ||\n\t\t\t\t\t\tisEqualWidth ||\n\t\t\t\t\t\tisFullWidth( align ) ) &&\n\t\t\t\t\t( hasInnerBlocks\n\t\t\t\t\t\t? styles.groupAppender\n\t\t\t\t\t\t: styles.wideGroupAppender )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<InnerBlocks.ButtonBlockAppender />\n\t\t\t</View>\n\t\t),\n\t\t[ align, hasInnerBlocks, width ]\n\t);\n\n\tif ( ! isSelected && ! hasInnerBlocks ) {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\tgetStylesFromColorScheme(\n\t\t\t\t\t\tstyles.groupPlaceholder,\n\t\t\t\t\t\tstyles.groupPlaceholderDark\n\t\t\t\t\t),\n\t\t\t\t\t! hasInnerBlocks && {\n\t\t\t\t\t\t...styles.marginVerticalDense,\n\t\t\t\t\t\t...styles.marginHorizontalNone,\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<View\n\t\t\tstyle={ [\n\t\t\t\tisSelected && hasInnerBlocks && styles.innerBlocks,\n\t\t\t\tmergedStyle,\n\t\t\t\tisSelected &&\n\t\t\t\t\thasInnerBlocks &&\n\t\t\t\t\tmergedStyle?.backgroundColor &&\n\t\t\t\t\tstyles.hasBackgroundAppender,\n\t\t\t\tisLastInnerBlockSelected &&\n\t\t\t\t\tmergedStyle?.backgroundColor &&\n\t\t\t\t\tstyles.isLastInnerBlockSelected,\n\t\t\t] }\n\t\t>\n\t\t\t{ resizeObserver }\n\t\t\t<InnerBlocks\n\t\t\t\trenderAppender={ isSelected && renderAppender }\n\t\t\t\tparentWidth={ width }\n\t\t\t\tblockWidth={ blockWidth }\n\t\t\t/>\n\t\t</View>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlock,\n\t\t\tgetBlockIndex,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockAttributes,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst block = getBlock( clientId );\n\t\tconst hasInnerBlocks = !! ( block && block.innerBlocks.length );\n\t\tconst isInnerBlockSelected =\n\t\t\thasInnerBlocks && hasSelectedInnerBlock( clientId, true );\n\t\tlet isLastInnerBlockSelected = false;\n\n\t\tif ( isInnerBlockSelected ) {\n\t\t\tconst { innerBlocks } = block;\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\tconst totalInnerBlocks = innerBlocks.length - 1;\n\t\t\tconst blockIndex = getBlockIndex( selectedBlockClientId, clientId );\n\t\t\tisLastInnerBlockSelected = totalInnerBlocks === blockIndex;\n\t\t}\n\n\t\tconst parentId = getBlockRootClientId( clientId );\n\t\tconst parentBlockAlignment = getBlockAttributes( parentId )?.align;\n\n\t\treturn {\n\t\t\thasInnerBlocks,\n\t\t\tisLastInnerBlockSelected,\n\t\t\tparentBlockAlignment,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( GroupEdit );\n"]}