{"version":3,"sources":["@wordpress/block-library/src/file/edit.native.js"],"names":["View","Clipboard","TouchableWithoutFeedback","Text","requestImageFailedRetryDialog","requestImageUploadCancelDialog","mediaUploadSync","BlockIcon","MediaPlaceholder","MediaUploadProgress","RichText","PlainText","BlockControls","MediaUpload","InspectorControls","MEDIA_TYPE_ANY","ToolbarButton","ToolbarGroup","PanelBody","ToggleControl","TextControl","SelectControl","Icon","file","icon","replace","button","external","link","warning","Component","__","_x","compose","withPreferredColorScheme","withDispatch","withSelect","getProtocol","styles","URL_COPIED_NOTIFICATION_DURATION_MS","MIN_WIDTH","FileEdit","props","state","isUploadInProgress","isSidebarLinkSettings","placeholderTextWidth","maxWidth","timerRef","onLayout","bind","onSelectFile","onChangeFileName","onChangeDownloadButtonText","updateMediaProgress","finishMediaUploadWithSuccess","finishMediaUploadWithFailure","getFileComponent","onChangeDownloadButtonVisibility","onCopyURL","onChangeOpenInNewWindow","onChangeLinkDestinationOption","onShowLinkSettings","onFilePressed","mediaUploadStateReset","attributes","setAttributes","downloadButtonText","undefined","id","url","clearTimeout","prevProps","isSidebarOpened","setState","media","href","fileName","title","textLinkHref","showDownloadButton","newHref","isUrlCopied","setString","setTimeout","newValue","textLinkTarget","payload","mediaUrl","mediaServerId","mediaId","openSidebar","open","isUploadFailed","linkDestinationOptions","value","label","attachmentPage","actionButtonStyle","getStylesFromColorScheme","actionButton","actionButtonDark","isCopyUrlDisabled","dimmedActionButtonStyle","dimmedActionButton","dimmedActionButtonDark","finalButtonStyle","align","getFlexAlign","alignment","alignSelf","nativeEvent","width","layout","defaultButton","paddingLeft","paddingRight","placeholderText","placeholder","textWidth","lines","Math","min","openMediaOptions","getMediaOptions","isSelected","isButtonFocused","minWidth","dimmedStyle","disabledButton","errorIconStyle","Object","assign","errorIcon","uploadFailed","getPlaceholderWidth","getToolbarEditButton","getInspectorControls","container","getTextAlignmentForAlignment","errorContainer","getStyleForAlignment","buttonText","color","placeholderTextColor","instructions","onFocus","select","isEditorSidebarOpened","isNotFileHref","getMedia","dispatch","openGeneralSidebar"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View, Clipboard, TouchableWithoutFeedback, Text } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport {\n\trequestImageFailedRetryDialog,\n\trequestImageUploadCancelDialog,\n\tmediaUploadSync,\n} from '@wordpress/react-native-bridge';\nimport {\n\tBlockIcon,\n\tMediaPlaceholder,\n\tMediaUploadProgress,\n\tRichText,\n\tPlainText,\n\tBlockControls,\n\tMediaUpload,\n\tInspectorControls,\n\tMEDIA_TYPE_ANY,\n} from '@wordpress/block-editor';\nimport {\n\tToolbarButton,\n\tToolbarGroup,\n\tPanelBody,\n\tToggleControl,\n\tTextControl,\n\tSelectControl,\n\tIcon,\n} from '@wordpress/components';\nimport {\n\tfile as icon,\n\treplace,\n\tbutton,\n\texternal,\n\tlink,\n\twarning,\n} from '@wordpress/icons';\nimport { Component } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { getProtocol } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport styles from './style.scss';\n\nconst URL_COPIED_NOTIFICATION_DURATION_MS = 1500;\nconst MIN_WIDTH = 40;\n\nexport class FileEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisUploadInProgress: false,\n\t\t\tisSidebarLinkSettings: false,\n\t\t\tplaceholderTextWidth: 0,\n\t\t\tmaxWidth: 0,\n\t\t};\n\n\t\tthis.timerRef = null;\n\n\t\tthis.onLayout = this.onLayout.bind( this );\n\t\tthis.onSelectFile = this.onSelectFile.bind( this );\n\t\tthis.onChangeFileName = this.onChangeFileName.bind( this );\n\t\tthis.onChangeDownloadButtonText = this.onChangeDownloadButtonText.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.updateMediaProgress = this.updateMediaProgress.bind( this );\n\t\tthis.finishMediaUploadWithSuccess = this.finishMediaUploadWithSuccess.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.finishMediaUploadWithFailure = this.finishMediaUploadWithFailure.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.getFileComponent = this.getFileComponent.bind( this );\n\t\tthis.onChangeDownloadButtonVisibility = this.onChangeDownloadButtonVisibility.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onCopyURL = this.onCopyURL.bind( this );\n\t\tthis.onChangeOpenInNewWindow = this.onChangeOpenInNewWindow.bind(\n\t\t\tthis\n\t\t);\n\n\t\tthis.onChangeLinkDestinationOption = this.onChangeLinkDestinationOption.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onShowLinkSettings = this.onShowLinkSettings.bind( this );\n\t\tthis.onFilePressed = this.onFilePressed.bind( this );\n\t\tthis.mediaUploadStateReset = this.mediaUploadStateReset.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { attributes, setAttributes } = this.props;\n\t\tconst { downloadButtonText } = attributes;\n\n\t\tif ( downloadButtonText === undefined || downloadButtonText === '' ) {\n\t\t\tsetAttributes( {\n\t\t\t\tdownloadButtonText: _x( 'Download', 'button label' ),\n\t\t\t} );\n\t\t}\n\n\t\tif (\n\t\t\tattributes.id &&\n\t\t\tattributes.url &&\n\t\t\tgetProtocol( attributes.url ) === 'file:'\n\t\t) {\n\t\t\tmediaUploadSync();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.timerRef );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tprevProps.isSidebarOpened &&\n\t\t\t! this.props.isSidebarOpened &&\n\t\t\tthis.state.isSidebarLinkSettings\n\t\t) {\n\t\t\tthis.setState( { isSidebarLinkSettings: false } );\n\t\t}\n\t}\n\n\tonSelectFile( media ) {\n\t\tthis.props.setAttributes( {\n\t\t\thref: media.url,\n\t\t\tfileName: media.title,\n\t\t\ttextLinkHref: media.url,\n\t\t\tid: media.id,\n\t\t} );\n\t}\n\n\tonChangeFileName( fileName ) {\n\t\tthis.props.setAttributes( { fileName } );\n\t}\n\n\tonChangeDownloadButtonText( downloadButtonText ) {\n\t\tthis.props.setAttributes( { downloadButtonText } );\n\t}\n\n\tonChangeDownloadButtonVisibility( showDownloadButton ) {\n\t\tthis.props.setAttributes( { showDownloadButton } );\n\t}\n\n\tonChangeLinkDestinationOption( newHref ) {\n\t\t// Choose Media File or Attachment Page (when file is in Media Library)\n\t\tthis.props.setAttributes( { textLinkHref: newHref } );\n\t}\n\n\tonCopyURL() {\n\t\tif ( this.state.isUrlCopied ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { href } = this.props.attributes;\n\t\tClipboard.setString( href );\n\n\t\tthis.setState( { isUrlCopied: true } );\n\t\tthis.timerRef = setTimeout( () => {\n\t\t\tthis.setState( { isUrlCopied: false } );\n\t\t}, URL_COPIED_NOTIFICATION_DURATION_MS );\n\t}\n\n\tonChangeOpenInNewWindow( newValue ) {\n\t\tthis.props.setAttributes( {\n\t\t\ttextLinkTarget: newValue ? '_blank' : false,\n\t\t} );\n\t}\n\n\tupdateMediaProgress( payload ) {\n\t\tconst { setAttributes } = this.props;\n\t\tif ( payload.mediaUrl ) {\n\t\t\tsetAttributes( { url: payload.mediaUrl } );\n\t\t}\n\t\tif ( ! this.state.isUploadInProgress ) {\n\t\t\tthis.setState( { isUploadInProgress: true } );\n\t\t}\n\t}\n\n\tfinishMediaUploadWithSuccess( payload ) {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\thref: payload.mediaUrl,\n\t\t\tid: payload.mediaServerId,\n\t\t\ttextLinkHref: payload.mediaUrl,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tfinishMediaUploadWithFailure( payload ) {\n\t\tthis.props.setAttributes( { id: payload.mediaId } );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tmediaUploadStateReset() {\n\t\tconst { setAttributes } = this.props;\n\n\t\tsetAttributes( {\n\t\t\tid: null,\n\t\t\thref: null,\n\t\t\ttextLinkHref: null,\n\t\t\tfileName: null,\n\t\t} );\n\t\tthis.setState( { isUploadInProgress: false } );\n\t}\n\n\tonShowLinkSettings() {\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tisSidebarLinkSettings: true,\n\t\t\t},\n\t\t\tthis.props.openSidebar\n\t\t);\n\t}\n\n\tgetToolbarEditButton( open ) {\n\t\treturn (\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Edit file' ) }\n\t\t\t\t\t\ticon={ replace }\n\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\ttitle={ __( 'Link To' ) }\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tonClick={ this.onShowLinkSettings }\n\t\t\t\t\t/>\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t);\n\t}\n\n\tgetInspectorControls(\n\t\t{ showDownloadButton, textLinkTarget, href, textLinkHref },\n\t\tmedia,\n\t\tisUploadInProgress,\n\t\tisUploadFailed\n\t) {\n\t\tlet linkDestinationOptions = [ { value: href, label: __( 'URL' ) } ];\n\t\tconst attachmentPage = media && media.link;\n\t\tconst { isSidebarLinkSettings } = this.state;\n\n\t\tif ( attachmentPage ) {\n\t\t\tlinkDestinationOptions = [\n\t\t\t\t{ value: href, label: __( 'Media file' ) },\n\t\t\t\t{ value: attachmentPage, label: __( 'Attachment page' ) },\n\t\t\t];\n\t\t}\n\n\t\tconst actionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.actionButton,\n\t\t\tstyles.actionButtonDark\n\t\t);\n\n\t\tconst isCopyUrlDisabled = isUploadFailed || isUploadInProgress;\n\n\t\tconst dimmedActionButtonStyle = this.props.getStylesFromColorScheme(\n\t\t\tstyles.dimmedActionButton,\n\t\t\tstyles.dimmedActionButtonDark\n\t\t);\n\n\t\tconst finalButtonStyle = isCopyUrlDisabled\n\t\t\t? dimmedActionButtonStyle\n\t\t\t: actionButtonStyle;\n\n\t\treturn (\n\t\t\t<InspectorControls>\n\t\t\t\t{ isSidebarLinkSettings || (\n\t\t\t\t\t<PanelBody title={ __( 'File block settings' ) } />\n\t\t\t\t) }\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\ticon={ link }\n\t\t\t\t\t\tlabel={ __( 'Link to' ) }\n\t\t\t\t\t\tvalue={ textLinkHref }\n\t\t\t\t\t\tonChange={ this.onChangeLinkDestinationOption }\n\t\t\t\t\t\toptions={ linkDestinationOptions }\n\t\t\t\t\t/>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\t\t\tchecked={ textLinkTarget === '_blank' }\n\t\t\t\t\t\tonChange={ this.onChangeOpenInNewWindow }\n\t\t\t\t\t/>\n\t\t\t\t\t{ ! isSidebarLinkSettings && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\ticon={ button }\n\t\t\t\t\t\t\tlabel={ __( 'Show download button' ) }\n\t\t\t\t\t\t\tchecked={ showDownloadButton }\n\t\t\t\t\t\t\tonChange={ this.onChangeDownloadButtonVisibility }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tdisabled={ isCopyUrlDisabled }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tthis.state.isUrlCopied\n\t\t\t\t\t\t\t\t? __( 'Copied!' )\n\t\t\t\t\t\t\t\t: __( 'Copy file URL' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlabelStyle={\n\t\t\t\t\t\t\tthis.state.isUrlCopied || finalButtonStyle\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonPress={ this.onCopyURL }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t);\n\t}\n\n\tgetStyleForAlignment( align ) {\n\t\tconst getFlexAlign = ( alignment ) => {\n\t\t\tswitch ( alignment ) {\n\t\t\t\tcase 'right':\n\t\t\t\t\treturn 'flex-end';\n\t\t\t\tcase 'center':\n\t\t\t\t\treturn 'center';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'flex-start';\n\t\t\t}\n\t\t};\n\t\treturn { alignSelf: getFlexAlign( align ) };\n\t}\n\n\tgetTextAlignmentForAlignment( align ) {\n\t\tswitch ( align ) {\n\t\t\tcase 'right':\n\t\t\t\treturn 'right';\n\t\t\tcase 'center':\n\t\t\t\treturn 'center';\n\t\t\tdefault:\n\t\t\t\treturn 'left';\n\t\t}\n\t}\n\n\tonFilePressed() {\n\t\tconst { attributes } = this.props;\n\n\t\tif ( this.state.isUploadInProgress ) {\n\t\t\trequestImageUploadCancelDialog( attributes.id );\n\t\t} else if (\n\t\t\tattributes.id &&\n\t\t\tgetProtocol( attributes.href ) === 'file:'\n\t\t) {\n\t\t\trequestImageFailedRetryDialog( attributes.id );\n\t\t}\n\t}\n\n\tonLayout( { nativeEvent } ) {\n\t\tconst { width } = nativeEvent.layout;\n\t\tconst { paddingLeft, paddingRight } = styles.defaultButton;\n\t\tthis.setState( {\n\t\t\tmaxWidth: width - ( paddingLeft + paddingRight ),\n\t\t} );\n\t}\n\n\t// Render `Text` with `placeholderText` styled as a placeholder\n\t// to calculate its width which then is set as a `minWidth`\n\t// This should be fixed on RNAztec level. In the mean time,\n\t// We use the same strategy implemented in Button block\n\tgetPlaceholderWidth( placeholderText ) {\n\t\tconst { maxWidth, placeholderTextWidth } = this.state;\n\t\treturn (\n\t\t\t<Text\n\t\t\t\tstyle={ styles.placeholder }\n\t\t\t\tonTextLayout={ ( { nativeEvent } ) => {\n\t\t\t\t\tconst textWidth =\n\t\t\t\t\t\tnativeEvent.lines[ 0 ] && nativeEvent.lines[ 0 ].width;\n\t\t\t\t\tif ( textWidth && textWidth !== placeholderTextWidth ) {\n\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\tplaceholderTextWidth: Math.min(\n\t\t\t\t\t\t\t\ttextWidth,\n\t\t\t\t\t\t\t\tmaxWidth\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ placeholderText }\n\t\t\t</Text>\n\t\t);\n\t}\n\n\tgetFileComponent( openMediaOptions, getMediaOptions ) {\n\t\tconst { attributes, media, isSelected } = this.props;\n\t\tconst { isButtonFocused, placeholderTextWidth } = this.state;\n\n\t\tconst {\n\t\t\tfileName,\n\t\t\tdownloadButtonText,\n\t\t\tid,\n\t\t\tshowDownloadButton,\n\t\t\talign,\n\t\t} = attributes;\n\n\t\tconst minWidth =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? MIN_WIDTH\n\t\t\t\t: placeholderTextWidth;\n\n\t\tconst placeholderText =\n\t\t\tisButtonFocused ||\n\t\t\t( ! isButtonFocused &&\n\t\t\t\tdownloadButtonText &&\n\t\t\t\tdownloadButtonText !== '' )\n\t\t\t\t? ''\n\t\t\t\t: __( 'Add text…' );\n\n\t\treturn (\n\t\t\t<MediaUploadProgress\n\t\t\t\tmediaId={ id }\n\t\t\t\tonUpdateMediaProgress={ this.updateMediaProgress }\n\t\t\t\tonFinishMediaUploadWithSuccess={\n\t\t\t\t\tthis.finishMediaUploadWithSuccess\n\t\t\t\t}\n\t\t\t\tonFinishMediaUploadWithFailure={\n\t\t\t\t\tthis.finishMediaUploadWithFailure\n\t\t\t\t}\n\t\t\t\tonMediaUploadStateReset={ this.mediaUploadStateReset }\n\t\t\t\trenderContent={ ( { isUploadInProgress, isUploadFailed } ) => {\n\t\t\t\t\tconst dimmedStyle =\n\t\t\t\t\t\t( this.state.isUploadInProgress || isUploadFailed ) &&\n\t\t\t\t\t\tstyles.disabledButton;\n\t\t\t\t\tconst finalButtonStyle = [\n\t\t\t\t\t\tstyles.defaultButton,\n\t\t\t\t\t\tdimmedStyle,\n\t\t\t\t\t];\n\n\t\t\t\t\tconst errorIconStyle = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tstyles.errorIcon,\n\t\t\t\t\t\tstyles.uploadFailed\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TouchableWithoutFeedback\n\t\t\t\t\t\t\taccessible={ ! isSelected }\n\t\t\t\t\t\t\tonPress={ this.onFilePressed }\n\t\t\t\t\t\t\tonLongPress={ openMediaOptions }\n\t\t\t\t\t\t\tdisabled={ ! isSelected }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<View onLayout={ this.onLayout }>\n\t\t\t\t\t\t\t\t{ this.getPlaceholderWidth( placeholderText ) }\n\t\t\t\t\t\t\t\t{ isUploadInProgress ||\n\t\t\t\t\t\t\t\t\tthis.getToolbarEditButton(\n\t\t\t\t\t\t\t\t\t\topenMediaOptions\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ getMediaOptions() }\n\t\t\t\t\t\t\t\t{ isSelected &&\n\t\t\t\t\t\t\t\t\tthis.getInspectorControls(\n\t\t\t\t\t\t\t\t\t\tattributes,\n\t\t\t\t\t\t\t\t\t\tmedia,\n\t\t\t\t\t\t\t\t\t\tisUploadInProgress,\n\t\t\t\t\t\t\t\t\t\tisUploadFailed\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<View style={ styles.container }>\n\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\tonChange={ this.onChangeFileName }\n\t\t\t\t\t\t\t\t\t\tplaceholder={ __( 'File name' ) }\n\t\t\t\t\t\t\t\t\t\trootTagsToEliminate={ [ 'p' ] }\n\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\tvalue={ fileName }\n\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\ttextAlign={ this.getTextAlignmentForAlignment(\n\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{ isUploadFailed && (\n\t\t\t\t\t\t\t\t\t\t<View style={ styles.errorContainer }>\n\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ warning }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ errorIconStyle }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<PlainText\n\t\t\t\t\t\t\t\t\t\t\t\teditable={ false }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ __( 'Error' ) }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.uploadFailed }\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t{ showDownloadButton &&\n\t\t\t\t\t\t\t\t\tthis.state.maxWidth > 0 && (\n\t\t\t\t\t\t\t\t\t\t<View\n\t\t\t\t\t\t\t\t\t\t\tstyle={ [\n\t\t\t\t\t\t\t\t\t\t\t\tfinalButtonStyle,\n\t\t\t\t\t\t\t\t\t\t\t\tthis.getStyleForAlignment(\n\t\t\t\t\t\t\t\t\t\t\t\t\talign\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<RichText\n\t\t\t\t\t\t\t\t\t\t\t\twithoutInteractiveFormatting\n\t\t\t\t\t\t\t\t\t\t\t\t__unstableMobileNoFocusOnMount\n\t\t\t\t\t\t\t\t\t\t\t\trootTagsToEliminate={ [ 'p' ] }\n\t\t\t\t\t\t\t\t\t\t\t\ttagName=\"p\"\n\t\t\t\t\t\t\t\t\t\t\t\ttextAlign=\"center\"\n\t\t\t\t\t\t\t\t\t\t\t\tminWidth={ minWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth={ this.state.maxWidth }\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteEnter={ true }\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={ styles.buttonText }\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={ downloadButtonText }\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={ placeholderText }\n\t\t\t\t\t\t\t\t\t\t\t\tunstableOnFocus={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisButtonFocused: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tselectionColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.buttonText.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholderTextColor={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyles.placeholderTextColor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.color\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tunderlineColorAndroid=\"transparent\"\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.onChangeDownloadButtonText\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { attributes } = this.props;\n\t\tconst { href } = attributes;\n\n\t\tif ( ! href ) {\n\t\t\treturn (\n\t\t\t\t<MediaPlaceholder\n\t\t\t\t\ticon={ <BlockIcon icon={ icon } /> }\n\t\t\t\t\tlabels={ {\n\t\t\t\t\t\ttitle: __( 'File' ),\n\t\t\t\t\t\tinstructions: __( 'CHOOSE A FILE' ),\n\t\t\t\t\t} }\n\t\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\t\tonFocus={ this.props.onFocus }\n\t\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ [ MEDIA_TYPE_ANY ] }\n\t\t\t\tisReplacingMedia={ true }\n\t\t\t\tonSelect={ this.onSelectFile }\n\t\t\t\trender={ ( { open, getMediaOptions } ) => {\n\t\t\t\t\treturn this.getFileComponent( open, getMediaOptions );\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst { attributes } = props;\n\t\tconst { id, href } = attributes;\n\t\tconst { isEditorSidebarOpened } = select( 'core/edit-post' );\n\t\tconst isNotFileHref = id && getProtocol( href ) !== 'file:';\n\t\treturn {\n\t\t\tmedia: isNotFileHref ? select( 'core' ).getMedia( id ) : undefined,\n\t\t\tisSidebarOpened: isEditorSidebarOpened(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { openGeneralSidebar } = dispatch( 'core/edit-post' );\n\t\treturn {\n\t\t\topenSidebar: () => openGeneralSidebar( 'edit-post/block' ),\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( FileEdit );\n"]}